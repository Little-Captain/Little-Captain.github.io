
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>第十四章 流式编程 · OnJava8</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Little Captain">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="14-Streams.html" />
    
    
    <link rel="prev" href="13-Functional-Programming.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="00-Preface.html">
            
                <a href="00-Preface.html">
            
                    
                        <b>1.2.</b>
                    
                    前言
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="00-Preface.html">
            
                <a href="00-Preface.html#教学目标">
            
                    
                        <b>1.2.1.</b>
                    
                    教学目标
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="00-Preface.html">
            
                <a href="00-Preface.html#语言设计错误">
            
                    
                        <b>1.2.2.</b>
                    
                    语言设计错误
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="00-Preface.html">
            
                <a href="00-Preface.html#测试用例">
            
                    
                        <b>1.2.3.</b>
                    
                    测试用例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="00-Preface.html">
            
                <a href="00-Preface.html#普及性">
            
                    
                        <b>1.2.4.</b>
                    
                    普及性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="00-Preface.html">
            
                <a href="00-Preface.html#关于安卓">
            
                    
                        <b>1.2.5.</b>
                    
                    关于安卓
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="00-Preface.html">
            
                <a href="00-Preface.html#电子版权声明">
            
                    
                        <b>1.2.6.</b>
                    
                    电子版权声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="00-Preface.html">
            
                <a href="00-Preface.html#版本说明">
            
                    
                        <b>1.2.7.</b>
                    
                    版本说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="00-Preface.html">
            
                <a href="00-Preface.html#封面设计">
            
                    
                        <b>1.2.8.</b>
                    
                    封面设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="00-Preface.html">
            
                <a href="00-Preface.html#感谢的人">
            
                    
                        <b>1.2.9.</b>
                    
                    感谢的人
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="00-Preface.html">
            
                <a href="00-Preface.html#献礼">
            
                    
                        <b>1.2.10.</b>
                    
                    献礼
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html">
            
                    
                        <b>1.3.</b>
                    
                    简介
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#前提条件">
            
                    
                        <b>1.3.1.</b>
                    
                    前提条件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#JDK文档">
            
                    
                        <b>1.3.2.</b>
                    
                    JDK文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#C编程思想">
            
                    
                        <b>1.3.3.</b>
                    
                    C编程思想
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#源码下载">
            
                    
                        <b>1.3.4.</b>
                    
                    源码下载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#编码样式">
            
                    
                        <b>1.3.5.</b>
                    
                    编码样式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#BUG提交">
            
                    
                        <b>1.3.6.</b>
                    
                    BUG提交
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#邮箱订阅">
            
                    
                        <b>1.3.7.</b>
                    
                    邮箱订阅
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="00-Introduction.html">
            
                <a href="00-Introduction.html#Java图形界面">
            
                    
                        <b>1.3.8.</b>
                    
                    Java图形界面
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html">
            
                    
                        <b>1.4.</b>
                    
                    第一章 对象的概念
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#抽象">
            
                    
                        <b>1.4.1.</b>
                    
                    抽象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#接口">
            
                    
                        <b>1.4.2.</b>
                    
                    接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#服务提供">
            
                    
                        <b>1.4.3.</b>
                    
                    服务提供
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#封装">
            
                    
                        <b>1.4.4.</b>
                    
                    封装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#复用">
            
                    
                        <b>1.4.5.</b>
                    
                    复用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#继承">
            
                    
                        <b>1.4.6.</b>
                    
                    继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#多态">
            
                    
                        <b>1.4.7.</b>
                    
                    多态
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#单继承">
            
                    
                        <b>1.4.8.</b>
                    
                    单继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#集合">
            
                    
                        <b>1.4.9.</b>
                    
                    集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#生命周期">
            
                    
                        <b>1.4.10.</b>
                    
                    生命周期
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#异常处理">
            
                    
                        <b>1.4.11.</b>
                    
                    异常处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="01-What-is-an-Object.html">
            
                <a href="01-What-is-an-Object.html#本章小结">
            
                    
                        <b>1.4.12.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="02-Installing-Java-and-the-Book-Examples.html">
            
                <a href="02-Installing-Java-and-the-Book-Examples.html">
            
                    
                        <b>1.5.</b>
                    
                    第二章 安装Java和本书用例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="02-Installing-Java-and-the-Book-Examples.html">
            
                <a href="02-Installing-Java-and-the-Book-Examples.html#编辑器">
            
                    
                        <b>1.5.1.</b>
                    
                    编辑器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="02-Installing-Java-and-the-Book-Examples.html">
            
                <a href="02-Installing-Java-and-the-Book-Examples.html#Shell">
            
                    
                        <b>1.5.2.</b>
                    
                    Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="02-Installing-Java-and-the-Book-Examples.html">
            
                <a href="02-Installing-Java-and-the-Book-Examples.html#Java安装">
            
                    
                        <b>1.5.3.</b>
                    
                    Java安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="02-Installing-Java-and-the-Book-Examples.html">
            
                <a href="02-Installing-Java-and-the-Book-Examples.html#校验安装">
            
                    
                        <b>1.5.4.</b>
                    
                    校验安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="02-Installing-Java-and-the-Book-Examples.html">
            
                <a href="02-Installing-Java-and-the-Book-Examples.html#安装和运行代码示例">
            
                    
                        <b>1.5.5.</b>
                    
                    安装和运行代码示例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html">
            
                    
                        <b>1.6.</b>
                    
                    第三章 万物皆对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#对象操纵">
            
                    
                        <b>1.6.1.</b>
                    
                    对象操纵
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#对象创建">
            
                    
                        <b>1.6.2.</b>
                    
                    对象创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#代码注释">
            
                    
                        <b>1.6.3.</b>
                    
                    代码注释
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#对象清理">
            
                    
                        <b>1.6.4.</b>
                    
                    对象清理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#类的创建">
            
                    
                        <b>1.6.5.</b>
                    
                    类的创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#程序编写">
            
                    
                        <b>1.6.6.</b>
                    
                    程序编写
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#小试牛刀">
            
                    
                        <b>1.6.7.</b>
                    
                    小试牛刀
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#编码风格">
            
                    
                        <b>1.6.8.</b>
                    
                    编码风格
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="03-Objects-Everywhere.html">
            
                <a href="03-Objects-Everywhere.html#本章小结">
            
                    
                        <b>1.6.9.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="04-Operators.html">
            
                <a href="04-Operators.html">
            
                    
                        <b>1.7.</b>
                    
                    第四章 运算符
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="04-Operators.html">
            
                <a href="04-Operators.html#使用说明">
            
                    
                        <b>1.7.1.</b>
                    
                    使用说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="04-Operators.html">
            
                <a href="04-Operators.html#优先级">
            
                    
                        <b>1.7.2.</b>
                    
                    优先级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="04-Operators.html">
            
                <a href="04-Operators.html#赋值">
            
                    
                        <b>1.7.3.</b>
                    
                    赋值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="04-Operators.html">
            
                <a href="04-Operators.html#算术运算符">
            
                    
                        <b>1.7.4.</b>
                    
                    算术运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="04-Operators.html">
            
                <a href="04-Operators.html#递增和递减">
            
                    
                        <b>1.7.5.</b>
                    
                    递增和递减
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="04-Operators.html">
            
                <a href="04-Operators.html#关系运算符">
            
                    
                        <b>1.7.6.</b>
                    
                    关系运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="04-Operators.html">
            
                <a href="04-Operators.html#逻辑运算符">
            
                    
                        <b>1.7.7.</b>
                    
                    逻辑运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="04-Operators.html">
            
                <a href="04-Operators.html#字面值常量">
            
                    
                        <b>1.7.8.</b>
                    
                    字面值常量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="04-Operators.html">
            
                <a href="04-Operators.html#按位运算符">
            
                    
                        <b>1.7.9.</b>
                    
                    按位运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="04-Operators.html">
            
                <a href="04-Operators.html#移位运算符">
            
                    
                        <b>1.7.10.</b>
                    
                    移位运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="04-Operators.html">
            
                <a href="04-Operators.html#三元运算符">
            
                    
                        <b>1.7.11.</b>
                    
                    三元运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="04-Operators.html">
            
                <a href="04-Operators.html#字符串运算符">
            
                    
                        <b>1.7.12.</b>
                    
                    字符串运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="04-Operators.html">
            
                <a href="04-Operators.html#常见陷阱">
            
                    
                        <b>1.7.13.</b>
                    
                    常见陷阱
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.14" data-path="04-Operators.html">
            
                <a href="04-Operators.html#类型转换">
            
                    
                        <b>1.7.14.</b>
                    
                    类型转换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.15" data-path="04-Operators.html">
            
                <a href="04-Operators.html#Java没有sizeof">
            
                    
                        <b>1.7.15.</b>
                    
                    Java没有sizeof
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.16" data-path="04-Operators.html">
            
                <a href="04-Operators.html#运算符总结">
            
                    
                        <b>1.7.16.</b>
                    
                    运算符总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.17" data-path="04-Operators.html">
            
                <a href="04-Operators.html#本章小结">
            
                    
                        <b>1.7.17.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html">
            
                    
                        <b>1.8.</b>
                    
                    第五章 控制流
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#true和false">
            
                    
                        <b>1.8.1.</b>
                    
                    true和false
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#if-else">
            
                    
                        <b>1.8.2.</b>
                    
                    if-else
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#迭代语句">
            
                    
                        <b>1.8.3.</b>
                    
                    迭代语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#for-in语法">
            
                    
                        <b>1.8.4.</b>
                    
                    for-in语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#return">
            
                    
                        <b>1.8.5.</b>
                    
                    return
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#break和continue">
            
                    
                        <b>1.8.6.</b>
                    
                    break和continue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#臭名昭著的goto">
            
                    
                        <b>1.8.7.</b>
                    
                    臭名昭著的goto
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#switch">
            
                    
                        <b>1.8.8.</b>
                    
                    switch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#switch字符串">
            
                    
                        <b>1.8.9.</b>
                    
                    switch字符串
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="05-Control-Flow.html">
            
                <a href="05-Control-Flow.html#本章小结">
            
                    
                        <b>1.8.10.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html">
            
                    
                        <b>1.9.</b>
                    
                    第六章 初始化和清理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#利用构造器保证初始化">
            
                    
                        <b>1.9.1.</b>
                    
                    利用构造器保证初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#方法重载">
            
                    
                        <b>1.9.2.</b>
                    
                    方法重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#无参构造器">
            
                    
                        <b>1.9.3.</b>
                    
                    无参构造器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#this关键字">
            
                    
                        <b>1.9.4.</b>
                    
                    this关键字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#垃圾回收器">
            
                    
                        <b>1.9.5.</b>
                    
                    垃圾回收器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#成员初始化">
            
                    
                        <b>1.9.6.</b>
                    
                    成员初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#构造器初始化">
            
                    
                        <b>1.9.7.</b>
                    
                    构造器初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#数组初始化">
            
                    
                        <b>1.9.8.</b>
                    
                    数组初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#枚举类型">
            
                    
                        <b>1.9.9.</b>
                    
                    枚举类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="06-Housekeeping.html">
            
                <a href="06-Housekeeping.html#本章小结">
            
                    
                        <b>1.9.10.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="07-Implementation-Hiding.html">
            
                <a href="07-Implementation-Hiding.html">
            
                    
                        <b>1.10.</b>
                    
                    第七章 封装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="07-Implementation-Hiding.html">
            
                <a href="07-Implementation-Hiding.html#包的概念">
            
                    
                        <b>1.10.1.</b>
                    
                    包的概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="07-Implementation-Hiding.html">
            
                <a href="07-Implementation-Hiding.html#访问权限修饰符">
            
                    
                        <b>1.10.2.</b>
                    
                    访问权限修饰符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="07-Implementation-Hiding.html">
            
                <a href="07-Implementation-Hiding.html#接口和实现">
            
                    
                        <b>1.10.3.</b>
                    
                    接口和实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="07-Implementation-Hiding.html">
            
                <a href="07-Implementation-Hiding.html#类访问权限">
            
                    
                        <b>1.10.4.</b>
                    
                    类访问权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="07-Implementation-Hiding.html">
            
                <a href="07-Implementation-Hiding.html#本章小结">
            
                    
                        <b>1.10.5.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html">
            
                    
                        <b>1.11.</b>
                    
                    第八章 复用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#组合语法">
            
                    
                        <b>1.11.1.</b>
                    
                    组合语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#继承语法">
            
                    
                        <b>1.11.2.</b>
                    
                    继承语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#委托">
            
                    
                        <b>1.11.3.</b>
                    
                    委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#结合组合与继承">
            
                    
                        <b>1.11.4.</b>
                    
                    结合组合与继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#组合与继承的选择">
            
                    
                        <b>1.11.5.</b>
                    
                    组合与继承的选择
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#protected">
            
                    
                        <b>1.11.6.</b>
                    
                    protected
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#向上转型">
            
                    
                        <b>1.11.7.</b>
                    
                    向上转型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#final关键字">
            
                    
                        <b>1.11.8.</b>
                    
                    final关键字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#类初始化和加载">
            
                    
                        <b>1.11.9.</b>
                    
                    类初始化和加载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="08-Reuse.html">
            
                <a href="08-Reuse.html#本章小结">
            
                    
                        <b>1.11.10.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html">
            
                    
                        <b>1.12.</b>
                    
                    第九章 多态
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html#向上转型回溯">
            
                    
                        <b>1.12.1.</b>
                    
                    向上转型回溯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html#深入理解">
            
                    
                        <b>1.12.2.</b>
                    
                    深入理解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html#构造器和多态">
            
                    
                        <b>1.12.3.</b>
                    
                    构造器和多态
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html#返回类型协变">
            
                    
                        <b>1.12.4.</b>
                    
                    返回类型协变
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html#使用继承设计">
            
                    
                        <b>1.12.5.</b>
                    
                    使用继承设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="09-Polymorphism.html">
            
                <a href="09-Polymorphism.html#本章小结">
            
                    
                        <b>1.12.6.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html">
            
                    
                        <b>1.13.</b>
                    
                    第十章 接口
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#抽象类和方法">
            
                    
                        <b>1.13.1.</b>
                    
                    抽象类和方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#接口创建">
            
                    
                        <b>1.13.2.</b>
                    
                    接口创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#抽象类和接口">
            
                    
                        <b>1.13.3.</b>
                    
                    抽象类和接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#完全解耦">
            
                    
                        <b>1.13.4.</b>
                    
                    完全解耦
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#多接口结合">
            
                    
                        <b>1.13.5.</b>
                    
                    多接口结合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#使用继承扩展接口">
            
                    
                        <b>1.13.6.</b>
                    
                    使用继承扩展接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.7" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#接口适配">
            
                    
                        <b>1.13.7.</b>
                    
                    接口适配
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.8" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#接口字段">
            
                    
                        <b>1.13.8.</b>
                    
                    接口字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.9" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#接口嵌套">
            
                    
                        <b>1.13.9.</b>
                    
                    接口嵌套
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.10" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#接口和工厂方法模式">
            
                    
                        <b>1.13.10.</b>
                    
                    接口和工厂方法模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.11" data-path="10-Interfaces.html">
            
                <a href="10-Interfaces.html#本章小结">
            
                    
                        <b>1.13.11.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html">
            
                    
                        <b>1.14.</b>
                    
                    第十一章 内部类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#创建内部类">
            
                    
                        <b>1.14.1.</b>
                    
                    创建内部类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#链接外部类">
            
                    
                        <b>1.14.2.</b>
                    
                    链接外部类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#内部类this和new的使用">
            
                    
                        <b>1.14.3.</b>
                    
                    内部类this和new的使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#内部类向上转型">
            
                    
                        <b>1.14.4.</b>
                    
                    内部类向上转型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#内部类方法和作用域">
            
                    
                        <b>1.14.5.</b>
                    
                    内部类方法和作用域
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#匿名内部类">
            
                    
                        <b>1.14.6.</b>
                    
                    匿名内部类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.7" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#嵌套类">
            
                    
                        <b>1.14.7.</b>
                    
                    嵌套类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.8" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#为什么需要内部类">
            
                    
                        <b>1.14.8.</b>
                    
                    为什么需要内部类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.9" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#继承内部类">
            
                    
                        <b>1.14.9.</b>
                    
                    继承内部类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.10" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#重写内部类">
            
                    
                        <b>1.14.10.</b>
                    
                    重写内部类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.11" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#内部类局部变量">
            
                    
                        <b>1.14.11.</b>
                    
                    内部类局部变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.12" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#内部类标识符">
            
                    
                        <b>1.14.12.</b>
                    
                    内部类标识符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.13" data-path="11-Inner-Classes.html">
            
                <a href="11-Inner-Classes.html#本章小结">
            
                    
                        <b>1.14.13.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="12-Collections.html">
            
                <a href="12-Collections.html">
            
                    
                        <b>1.15.</b>
                    
                    第十二章 集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="12-Collections.html">
            
                <a href="12-Collections.html#泛型和类型安全的集合">
            
                    
                        <b>1.15.1.</b>
                    
                    泛型和类型安全的集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="12-Collections.html">
            
                <a href="12-Collections.html#基本概念">
            
                    
                        <b>1.15.2.</b>
                    
                    基本概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="12-Collections.html">
            
                <a href="12-Collections.html#添加元素组">
            
                    
                        <b>1.15.3.</b>
                    
                    添加元素组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="12-Collections.html">
            
                <a href="12-Collections.html#集合的打印">
            
                    
                        <b>1.15.4.</b>
                    
                    集合的打印
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="12-Collections.html">
            
                <a href="12-Collections.html#列表List">
            
                    
                        <b>1.15.5.</b>
                    
                    列表List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="12-Collections.html">
            
                <a href="12-Collections.html#迭代器Iterators">
            
                    
                        <b>1.15.6.</b>
                    
                    迭代器Iterators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="12-Collections.html">
            
                <a href="12-Collections.html#链表LinkedList">
            
                    
                        <b>1.15.7.</b>
                    
                    链表LinkedList
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="12-Collections.html">
            
                <a href="12-Collections.html#堆栈Stack">
            
                    
                        <b>1.15.8.</b>
                    
                    堆栈Stack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="12-Collections.html">
            
                <a href="12-Collections.html#集合Set">
            
                    
                        <b>1.15.9.</b>
                    
                    集合Set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.10" data-path="12-Collections.html">
            
                <a href="12-Collections.html#映射Map">
            
                    
                        <b>1.15.10.</b>
                    
                    映射Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.11" data-path="12-Collections.html">
            
                <a href="12-Collections.html#队列Queue">
            
                    
                        <b>1.15.11.</b>
                    
                    队列Queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.12" data-path="12-Collections.html">
            
                <a href="12-Collections.html#集合与迭代器">
            
                    
                        <b>1.15.12.</b>
                    
                    集合与迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.13" data-path="12-Collections.html">
            
                <a href="12-Collections.html#for-in和迭代器">
            
                    
                        <b>1.15.13.</b>
                    
                    for-in和迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.14" data-path="12-Collections.html">
            
                <a href="12-Collections.html#本章小结">
            
                    
                        <b>1.15.14.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html">
            
                    
                        <b>1.16.</b>
                    
                    第十三章 函数式编程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#新旧对比">
            
                    
                        <b>1.16.1.</b>
                    
                    新旧对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#Lambda表达式">
            
                    
                        <b>1.16.2.</b>
                    
                    Lambda表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#方法引用">
            
                    
                        <b>1.16.3.</b>
                    
                    方法引用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#函数式接口">
            
                    
                        <b>1.16.4.</b>
                    
                    函数式接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#高阶函数">
            
                    
                        <b>1.16.5.</b>
                    
                    高阶函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#闭包">
            
                    
                        <b>1.16.6.</b>
                    
                    闭包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#函数组合">
            
                    
                        <b>1.16.7.</b>
                    
                    函数组合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#柯里化和部分求值">
            
                    
                        <b>1.16.8.</b>
                    
                    柯里化和部分求值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#纯函数式编程">
            
                    
                        <b>1.16.9.</b>
                    
                    纯函数式编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="13-Functional-Programming.html">
            
                <a href="13-Functional-Programming.html#本章小结">
            
                    
                        <b>1.16.10.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.17" data-path="14-Streams.html">
            
                <a href="14-Streams.html">
            
                    
                        <b>1.17.</b>
                    
                    第十四章 流式编程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="14-Streams.html">
            
                <a href="14-Streams.html#流支持">
            
                    
                        <b>1.17.1.</b>
                    
                    流支持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="14-Streams.html">
            
                <a href="14-Streams.html#流创建">
            
                    
                        <b>1.17.2.</b>
                    
                    流创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="14-Streams.html">
            
                <a href="14-Streams.html#中级流操作">
            
                    
                        <b>1.17.3.</b>
                    
                    中级流操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="14-Streams.html">
            
                <a href="14-Streams.html#Optional类">
            
                    
                        <b>1.17.4.</b>
                    
                    Optional类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="14-Streams.html">
            
                <a href="14-Streams.html#终端操作">
            
                    
                        <b>1.17.5.</b>
                    
                    终端操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="14-Streams.html">
            
                <a href="14-Streams.html#本章小结">
            
                    
                        <b>1.17.6.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html">
            
                    
                        <b>1.18.</b>
                    
                    第十五章 异常
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常概念">
            
                    
                        <b>1.18.1.</b>
                    
                    异常概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#基本异常">
            
                    
                        <b>1.18.2.</b>
                    
                    基本异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常捕获">
            
                    
                        <b>1.18.3.</b>
                    
                    异常捕获
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#自定义异常">
            
                    
                        <b>1.18.4.</b>
                    
                    自定义异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.5" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常规范">
            
                    
                        <b>1.18.5.</b>
                    
                    异常规范
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.6" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#任意异常捕获">
            
                    
                        <b>1.18.6.</b>
                    
                    任意异常捕获
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.7" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#Java标准异常">
            
                    
                        <b>1.18.7.</b>
                    
                    Java标准异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.8" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#finally关键字">
            
                    
                        <b>1.18.8.</b>
                    
                    finally关键字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.9" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常限制">
            
                    
                        <b>1.18.9.</b>
                    
                    异常限制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常构造">
            
                    
                        <b>1.18.10.</b>
                    
                    异常构造
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.11" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#Try-With-Resources用法">
            
                    
                        <b>1.18.11.</b>
                    
                    Try-With-Resources用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.12" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常匹配">
            
                    
                        <b>1.18.12.</b>
                    
                    异常匹配
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.13" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常准则">
            
                    
                        <b>1.18.13.</b>
                    
                    异常准则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.14" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#异常指南">
            
                    
                        <b>1.18.14.</b>
                    
                    异常指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.15" data-path="15-Exceptions.html">
            
                <a href="15-Exceptions.html#本章小结">
            
                    
                        <b>1.18.15.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html">
            
                    
                        <b>1.19.</b>
                    
                    第十六章 代码校验
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#测试">
            
                    
                        <b>1.19.1.</b>
                    
                    测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#前提条件">
            
                    
                        <b>1.19.2.</b>
                    
                    前提条件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#测试驱动开发">
            
                    
                        <b>1.19.3.</b>
                    
                    测试驱动开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#日志">
            
                    
                        <b>1.19.4.</b>
                    
                    日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#调试">
            
                    
                        <b>1.19.5.</b>
                    
                    调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#基准测试">
            
                    
                        <b>1.19.6.</b>
                    
                    基准测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.7" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#分析和优化">
            
                    
                        <b>1.19.7.</b>
                    
                    分析和优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.8" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#风格检测">
            
                    
                        <b>1.19.8.</b>
                    
                    风格检测
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.9" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#静态错误分析">
            
                    
                        <b>1.19.9.</b>
                    
                    静态错误分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.10" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#代码重审">
            
                    
                        <b>1.19.10.</b>
                    
                    代码重审
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.11" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#结对编程">
            
                    
                        <b>1.19.11.</b>
                    
                    结对编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.12" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#重构">
            
                    
                        <b>1.19.12.</b>
                    
                    重构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.13" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#持续集成">
            
                    
                        <b>1.19.13.</b>
                    
                    持续集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.14" data-path="16-Validating-Your-Code.html">
            
                <a href="16-Validating-Your-Code.html#本章小结">
            
                    
                        <b>1.19.14.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="17-Files.html">
            
                <a href="17-Files.html">
            
                    
                        <b>1.20.</b>
                    
                    第十七章 文件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.1" data-path="17-Files.html">
            
                <a href="17-Files.html#文件和目录路径">
            
                    
                        <b>1.20.1.</b>
                    
                    文件和目录路径
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2" data-path="17-Files.html">
            
                <a href="17-Files.html#目录">
            
                    
                        <b>1.20.2.</b>
                    
                    目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3" data-path="17-Files.html">
            
                <a href="17-Files.html#文件系统">
            
                    
                        <b>1.20.3.</b>
                    
                    文件系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.4" data-path="17-Files.html">
            
                <a href="17-Files.html#路径监听">
            
                    
                        <b>1.20.4.</b>
                    
                    路径监听
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.5" data-path="17-Files.html">
            
                <a href="17-Files.html#文件查找">
            
                    
                        <b>1.20.5.</b>
                    
                    文件查找
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.6" data-path="17-Files.html">
            
                <a href="17-Files.html#文件读写">
            
                    
                        <b>1.20.6.</b>
                    
                    文件读写
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.7" data-path="17-Files.html">
            
                <a href="17-Files.html#本章小结">
            
                    
                        <b>1.20.7.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="18-Strings.html">
            
                <a href="18-Strings.html">
            
                    
                        <b>1.21.</b>
                    
                    第十八章 字符串
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.21.1" data-path="18-Strings.html">
            
                <a href="18-Strings.html#字符串的不可变">
            
                    
                        <b>1.21.1.</b>
                    
                    字符串的不可变
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.2" data-path="18-Strings.html">
            
                <a href="18-Strings.html#重载和StringBuilder">
            
                    
                        <b>1.21.2.</b>
                    
                    重载和StringBuilder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.3" data-path="18-Strings.html">
            
                <a href="18-Strings.html#意外递归">
            
                    
                        <b>1.21.3.</b>
                    
                    意外递归
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.4" data-path="18-Strings.html">
            
                <a href="18-Strings.html#字符串操作">
            
                    
                        <b>1.21.4.</b>
                    
                    字符串操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.5" data-path="18-Strings.html">
            
                <a href="18-Strings.html#格式化输出">
            
                    
                        <b>1.21.5.</b>
                    
                    格式化输出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.6" data-path="18-Strings.html">
            
                <a href="18-Strings.html#常规表达式">
            
                    
                        <b>1.21.6.</b>
                    
                    常规表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.7" data-path="18-Strings.html">
            
                <a href="18-Strings.html#扫描输入">
            
                    
                        <b>1.21.7.</b>
                    
                    扫描输入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.8" data-path="18-Strings.html">
            
                <a href="18-Strings.html#StringTokenizer类">
            
                    
                        <b>1.21.8.</b>
                    
                    StringTokenizer类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.9" data-path="18-Strings.html">
            
                <a href="18-Strings.html#本章小结">
            
                    
                        <b>1.21.9.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html">
            
                    
                        <b>1.22.</b>
                    
                    第十九章 类型信息
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.22.1" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#运行时类型信息">
            
                    
                        <b>1.22.1.</b>
                    
                    运行时类型信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.2" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#类的对象">
            
                    
                        <b>1.22.2.</b>
                    
                    类的对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.3" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#类型转换检测">
            
                    
                        <b>1.22.3.</b>
                    
                    类型转换检测
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.4" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#注册工厂">
            
                    
                        <b>1.22.4.</b>
                    
                    注册工厂
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.5" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#类的等价比较">
            
                    
                        <b>1.22.5.</b>
                    
                    类的等价比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.6" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#反射运行时类信息">
            
                    
                        <b>1.22.6.</b>
                    
                    反射运行时类信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.7" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#动态代理">
            
                    
                        <b>1.22.7.</b>
                    
                    动态代理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.8" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#Optional类">
            
                    
                        <b>1.22.8.</b>
                    
                    Optional类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.9" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#接口和类型">
            
                    
                        <b>1.22.9.</b>
                    
                    接口和类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.10" data-path="19-Type-Information.html">
            
                <a href="19-Type-Information.html#本章小结">
            
                    
                        <b>1.22.10.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="20-Generics.html">
            
                <a href="20-Generics.html">
            
                    
                        <b>1.23.</b>
                    
                    第二十章 泛型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.23.1" data-path="20-Generics.html">
            
                <a href="20-Generics.html#简单泛型">
            
                    
                        <b>1.23.1.</b>
                    
                    简单泛型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.2" data-path="20-Generics.html">
            
                <a href="20-Generics.html#泛型接口">
            
                    
                        <b>1.23.2.</b>
                    
                    泛型接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.3" data-path="20-Generics.html">
            
                <a href="20-Generics.html#泛型方法">
            
                    
                        <b>1.23.3.</b>
                    
                    泛型方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.4" data-path="20-Generics.html">
            
                <a href="20-Generics.html#复杂模型构建">
            
                    
                        <b>1.23.4.</b>
                    
                    复杂模型构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.5" data-path="20-Generics.html">
            
                <a href="20-Generics.html#泛型擦除">
            
                    
                        <b>1.23.5.</b>
                    
                    泛型擦除
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.6" data-path="20-Generics.html">
            
                <a href="20-Generics.html#补偿擦除">
            
                    
                        <b>1.23.6.</b>
                    
                    补偿擦除
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.7" data-path="20-Generics.html">
            
                <a href="20-Generics.html#边界">
            
                    
                        <b>1.23.7.</b>
                    
                    边界
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.8" data-path="20-Generics.html">
            
                <a href="20-Generics.html#通配符">
            
                    
                        <b>1.23.8.</b>
                    
                    通配符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.9" data-path="20-Generics.html">
            
                <a href="20-Generics.html#问题">
            
                    
                        <b>1.23.9.</b>
                    
                    问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.10" data-path="20-Generics.html">
            
                <a href="20-Generics.html#自我约束类型">
            
                    
                        <b>1.23.10.</b>
                    
                    自我约束类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.11" data-path="20-Generics.html">
            
                <a href="20-Generics.html#动态类型安全">
            
                    
                        <b>1.23.11.</b>
                    
                    动态类型安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.12" data-path="20-Generics.html">
            
                <a href="20-Generics.html#泛型异常">
            
                    
                        <b>1.23.12.</b>
                    
                    泛型异常
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.13" data-path="20-Generics.html">
            
                <a href="20-Generics.html#混入">
            
                    
                        <b>1.23.13.</b>
                    
                    混入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.14" data-path="20-Generics.html">
            
                <a href="20-Generics.html#潜在类型">
            
                    
                        <b>1.23.14.</b>
                    
                    潜在类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.15" data-path="20-Generics.html">
            
                <a href="20-Generics.html#补偿不足">
            
                    
                        <b>1.23.15.</b>
                    
                    补偿不足
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.16" data-path="20-Generics.html">
            
                <a href="20-Generics.html#辅助潜在类型">
            
                    
                        <b>1.23.16.</b>
                    
                    辅助潜在类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.17" data-path="20-Generics.html">
            
                <a href="20-Generics.html#泛型的优劣">
            
                    
                        <b>1.23.17.</b>
                    
                    泛型的优劣
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html">
            
                    
                        <b>1.24.</b>
                    
                    第二十一章 数组
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.24.1" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#数组特性">
            
                    
                        <b>1.24.1.</b>
                    
                    数组特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#一等对象">
            
                    
                        <b>1.24.2.</b>
                    
                    一等对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.3" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#返回数组">
            
                    
                        <b>1.24.3.</b>
                    
                    返回数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.4" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#多维数组">
            
                    
                        <b>1.24.4.</b>
                    
                    多维数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.5" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#泛型数组">
            
                    
                        <b>1.24.5.</b>
                    
                    泛型数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.6" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#Arrays的fill方法">
            
                    
                        <b>1.24.6.</b>
                    
                    Arrays的fill方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.7" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#Arrays的setAll方法">
            
                    
                        <b>1.24.7.</b>
                    
                    Arrays的setAll方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.8" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#增量生成">
            
                    
                        <b>1.24.8.</b>
                    
                    增量生成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.9" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#随机生成">
            
                    
                        <b>1.24.9.</b>
                    
                    随机生成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.10" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#泛型和基本数组">
            
                    
                        <b>1.24.10.</b>
                    
                    泛型和基本数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.11" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#数组元素修改">
            
                    
                        <b>1.24.11.</b>
                    
                    数组元素修改
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.12" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#数组并行">
            
                    
                        <b>1.24.12.</b>
                    
                    数组并行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.13" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#Arrays工具类">
            
                    
                        <b>1.24.13.</b>
                    
                    Arrays工具类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.14" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#数组拷贝">
            
                    
                        <b>1.24.14.</b>
                    
                    数组拷贝
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.15" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#数组比较">
            
                    
                        <b>1.24.15.</b>
                    
                    数组比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.16" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#流和数组">
            
                    
                        <b>1.24.16.</b>
                    
                    流和数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.17" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#数组排序">
            
                    
                        <b>1.24.17.</b>
                    
                    数组排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.18" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#binarySearch二分查找">
            
                    
                        <b>1.24.18.</b>
                    
                    binarySearch二分查找
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.19" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#parallelPrefix并行前缀">
            
                    
                        <b>1.24.19.</b>
                    
                    parallelPrefix并行前缀
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.20" data-path="21-Arrays.html">
            
                <a href="21-Arrays.html#本章小结">
            
                    
                        <b>1.24.20.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html">
            
                    
                        <b>1.25.</b>
                    
                    第二十二章 枚举
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.25.1" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#基本功能">
            
                    
                        <b>1.25.1.</b>
                    
                    基本功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.2" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#方法添加">
            
                    
                        <b>1.25.2.</b>
                    
                    方法添加
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.3" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#switch语句">
            
                    
                        <b>1.25.3.</b>
                    
                    switch语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.4" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#values方法">
            
                    
                        <b>1.25.4.</b>
                    
                    values方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.5" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#实现而非继承">
            
                    
                        <b>1.25.5.</b>
                    
                    实现而非继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.6" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#随机选择">
            
                    
                        <b>1.25.6.</b>
                    
                    随机选择
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.7" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#使用接口组织">
            
                    
                        <b>1.25.7.</b>
                    
                    使用接口组织
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.8" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#使用EnumSet替代Flags">
            
                    
                        <b>1.25.8.</b>
                    
                    使用EnumSet替代Flags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.9" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#使用EnumMap">
            
                    
                        <b>1.25.9.</b>
                    
                    使用EnumMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.10" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#常量特定方法">
            
                    
                        <b>1.25.10.</b>
                    
                    常量特定方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.11" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#多次调度">
            
                    
                        <b>1.25.11.</b>
                    
                    多次调度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.12" data-path="22-Enumerations.html">
            
                <a href="22-Enumerations.html#本章小结">
            
                    
                        <b>1.25.12.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.26" data-path="23-Annotations.html">
            
                <a href="23-Annotations.html">
            
                    
                        <b>1.26.</b>
                    
                    第二十三章 注解
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.26.1" data-path="23-Annotations.html">
            
                <a href="23-Annotations.html#基本语法">
            
                    
                        <b>1.26.1.</b>
                    
                    基本语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.2" data-path="23-Annotations.html">
            
                <a href="23-Annotations.html#编写注解处理器">
            
                    
                        <b>1.26.2.</b>
                    
                    编写注解处理器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.3" data-path="23-Annotations.html">
            
                <a href="23-Annotations.html#使用javac处理注解">
            
                    
                        <b>1.26.3.</b>
                    
                    使用javac处理注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.4" data-path="23-Annotations.html">
            
                <a href="23-Annotations.html#基于注解的单元测试">
            
                    
                        <b>1.26.4.</b>
                    
                    基于注解的单元测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.5" data-path="23-Annotations.html">
            
                <a href="23-Annotations.html#本章小结">
            
                    
                        <b>1.26.5.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.27" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html">
            
                    
                        <b>1.27.</b>
                    
                    第二十四章 并发编程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.27.1" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#术语问题">
            
                    
                        <b>1.27.1.</b>
                    
                    术语问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.2" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#并发的超能力">
            
                    
                        <b>1.27.2.</b>
                    
                    并发的超能力
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.3" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#针对速度">
            
                    
                        <b>1.27.3.</b>
                    
                    针对速度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.4" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#四句格言">
            
                    
                        <b>1.27.4.</b>
                    
                    四句格言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.5" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#残酷的真相">
            
                    
                        <b>1.27.5.</b>
                    
                    残酷的真相
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.6" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#本章其余部分">
            
                    
                        <b>1.27.6.</b>
                    
                    本章其余部分
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.7" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#并行流">
            
                    
                        <b>1.27.7.</b>
                    
                    并行流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.8" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#创建和运行任务">
            
                    
                        <b>1.27.8.</b>
                    
                    创建和运行任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.9" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#终止耗时任务">
            
                    
                        <b>1.27.9.</b>
                    
                    终止耗时任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.10" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#CompletableFuture类">
            
                    
                        <b>1.27.10.</b>
                    
                    CompletableFuture类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.11" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#死锁">
            
                    
                        <b>1.27.11.</b>
                    
                    死锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.12" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#构造函数非线程安全">
            
                    
                        <b>1.27.12.</b>
                    
                    构造函数非线程安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.13" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#复杂性和代价">
            
                    
                        <b>1.27.13.</b>
                    
                    复杂性和代价
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.14" data-path="24-Concurrent-Programming.html">
            
                <a href="24-Concurrent-Programming.html#本章小结">
            
                    
                        <b>1.27.14.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.28" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html">
            
                    
                        <b>1.28.</b>
                    
                    第二十五章 设计模式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.28.1" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#概念">
            
                    
                        <b>1.28.1.</b>
                    
                    概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.2" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#构建型">
            
                    
                        <b>1.28.2.</b>
                    
                    构建型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.3" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#面向实施">
            
                    
                        <b>1.28.3.</b>
                    
                    面向实施
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.4" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#工厂模式">
            
                    
                        <b>1.28.4.</b>
                    
                    工厂模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.5" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#函数对象">
            
                    
                        <b>1.28.5.</b>
                    
                    函数对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.6" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#接口改变">
            
                    
                        <b>1.28.6.</b>
                    
                    接口改变
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.7" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#解释器">
            
                    
                        <b>1.28.7.</b>
                    
                    解释器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.8" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#回调">
            
                    
                        <b>1.28.8.</b>
                    
                    回调
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.9" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#多次调度">
            
                    
                        <b>1.28.9.</b>
                    
                    多次调度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.10" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#模式重构">
            
                    
                        <b>1.28.10.</b>
                    
                    模式重构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.11" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#抽象用法">
            
                    
                        <b>1.28.11.</b>
                    
                    抽象用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.12" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#多次派遣">
            
                    
                        <b>1.28.12.</b>
                    
                    多次派遣
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.13" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#访问者模式">
            
                    
                        <b>1.28.13.</b>
                    
                    访问者模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.14" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#RTTI的优劣">
            
                    
                        <b>1.28.14.</b>
                    
                    RTTI的优劣
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.15" data-path="25-Patterns.html">
            
                <a href="25-Patterns.html#本章小结">
            
                    
                        <b>1.28.15.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.29" data-path="Appendix-Supplements.html">
            
                <a href="Appendix-Supplements.html">
            
                    
                        <b>1.29.</b>
                    
                    附录:补充
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.29.1" data-path="Appendix-Supplements.html">
            
                <a href="Appendix-Supplements.html#可下载的补充">
            
                    
                        <b>1.29.1.</b>
                    
                    可下载的补充
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.2" data-path="Appendix-Supplements.html">
            
                <a href="Appendix-Supplements.html#通过Thinking-in-C来巩固Java基础">
            
                    
                        <b>1.29.2.</b>
                    
                    通过Thinking-in-C来巩固Java基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.3" data-path="Appendix-Supplements.html">
            
                <a href="Appendix-Supplements.html#动手实践">
            
                    
                        <b>1.29.3.</b>
                    
                    动手实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.30" data-path="Appendix-Programming-Guidelines.html">
            
                <a href="Appendix-Programming-Guidelines.html">
            
                    
                        <b>1.30.</b>
                    
                    附录:编程指南
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.30.1" data-path="Appendix-Programming-Guidelines.html">
            
                <a href="Appendix-Programming-Guidelines.html#设计">
            
                    
                        <b>1.30.1.</b>
                    
                    设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30.2" data-path="Appendix-Programming-Guidelines.html">
            
                <a href="Appendix-Programming-Guidelines.html#实现">
            
                    
                        <b>1.30.2.</b>
                    
                    实现
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.31" data-path="Appendix-Javadoc.html">
            
                <a href="Appendix-Javadoc.html">
            
                    
                        <b>1.31.</b>
                    
                    附录:文档注释
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32" data-path="Appendix-Passing-and-Returning-Objects.html">
            
                <a href="Appendix-Passing-and-Returning-Objects.html">
            
                    
                        <b>1.32.</b>
                    
                    附录:对象传递和返回
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.32.1" data-path="Appendix-Passing-and-Returning-Objects.html">
            
                <a href="Appendix-Passing-and-Returning-Objects.html#传递引用">
            
                    
                        <b>1.32.1.</b>
                    
                    传递引用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.2" data-path="Appendix-Passing-and-Returning-Objects.html">
            
                <a href="Appendix-Passing-and-Returning-Objects.html#本地拷贝">
            
                    
                        <b>1.32.2.</b>
                    
                    本地拷贝
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.3" data-path="Appendix-Passing-and-Returning-Objects.html">
            
                <a href="Appendix-Passing-and-Returning-Objects.html#控制克隆">
            
                    
                        <b>1.32.3.</b>
                    
                    控制克隆
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.4" data-path="Appendix-Passing-and-Returning-Objects.html">
            
                <a href="Appendix-Passing-and-Returning-Objects.html#不可变类">
            
                    
                        <b>1.32.4.</b>
                    
                    不可变类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.5" data-path="Appendix-Passing-and-Returning-Objects.html">
            
                <a href="Appendix-Passing-and-Returning-Objects.html#本章小结">
            
                    
                        <b>1.32.5.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.33" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html">
            
                    
                        <b>1.33.</b>
                    
                    附录:流式IO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.33.1" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#输入流类型">
            
                    
                        <b>1.33.1.</b>
                    
                    输入流类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.2" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#输出流类型">
            
                    
                        <b>1.33.2.</b>
                    
                    输出流类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.3" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#添加属性和有用的接口">
            
                    
                        <b>1.33.3.</b>
                    
                    添加属性和有用的接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.4" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#Reader和Writer">
            
                    
                        <b>1.33.4.</b>
                    
                    Reader和Writer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.5" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#RandomAccessFile类">
            
                    
                        <b>1.33.5.</b>
                    
                    RandomAccessFile类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.6" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#IO流典型用途">
            
                    
                        <b>1.33.6.</b>
                    
                    IO流典型用途
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.7" data-path="Appendix-IO-Streams.html">
            
                <a href="Appendix-IO-Streams.html#本章小结">
            
                    
                        <b>1.33.7.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.34" data-path="Appendix-Standard-IO.html">
            
                <a href="Appendix-Standard-IO.html">
            
                    
                        <b>1.34.</b>
                    
                    附录:标准IO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.34.1" data-path="Appendix-Standard-IO.html">
            
                <a href="Appendix-Standard-IO.html#执行控制">
            
                    
                        <b>1.34.1.</b>
                    
                    执行控制
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.35" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html">
            
                    
                        <b>1.35.</b>
                    
                    附录:新IO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.35.1" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#ByteBuffer">
            
                    
                        <b>1.35.1.</b>
                    
                    ByteBuffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.2" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#数据转换">
            
                    
                        <b>1.35.2.</b>
                    
                    转换数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.3" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#基本类型获取">
            
                    
                        <b>1.35.3.</b>
                    
                    获取原始类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.4" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#视图缓冲区">
            
                    
                        <b>1.35.4.</b>
                    
                    视图缓冲区
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.5" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#缓冲区数据操作">
            
                    
                        <b>1.35.5.</b>
                    
                    使用缓冲区进行数据操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.6" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#内存映射文件">
            
                    
                        <b>1.35.6.</b>
                    
                    内存映射文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.7" data-path="Appendix-New-IO.html">
            
                <a href="Appendix-New-IO.html#文件锁定">
            
                    
                        <b>1.35.7.</b>
                    
                    文件锁定
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.36" data-path="Appendix-Understanding-equals-and-hashCode.html">
            
                <a href="Appendix-Understanding-equals-and-hashCode.html">
            
                    
                        <b>1.36.</b>
                    
                    附录:理解equals和hashCode方法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.36.1" data-path="Appendix-Understanding-equals-and-hashCode.html">
            
                <a href="Appendix-Understanding-equals-and-hashCode.html#equals典范">
            
                    
                        <b>1.36.1.</b>
                    
                    equals典范
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.2" data-path="Appendix-Understanding-equals-and-hashCode.html">
            
                <a href="Appendix-Understanding-equals-and-hashCode.html#哈希和哈希码">
            
                    
                        <b>1.36.2.</b>
                    
                    哈希和哈希码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.3" data-path="Appendix-Understanding-equals-and-hashCode.html">
            
                <a href="Appendix-Understanding-equals-and-hashCode.html#调整HashMap">
            
                    
                        <b>1.36.3.</b>
                    
                    调整HashMap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.37" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html">
            
                    
                        <b>1.37.</b>
                    
                    附录:集合主题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.37.1" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#示例数据">
            
                    
                        <b>1.37.1.</b>
                    
                    示例数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.2" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#List行为">
            
                    
                        <b>1.37.2.</b>
                    
                    List行为
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.3" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#Set行为">
            
                    
                        <b>1.37.3.</b>
                    
                    Set行为
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.4" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#在Map中使用函数式操作">
            
                    
                        <b>1.37.4.</b>
                    
                    在Map中使用函数式操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.5" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#选择Map片段">
            
                    
                        <b>1.37.5.</b>
                    
                    选择Map片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.6" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#填充集合">
            
                    
                        <b>1.37.6.</b>
                    
                    填充集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.7" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#使用享元（Flyweight）自定义Collection和Map">
            
                    
                        <b>1.37.7.</b>
                    
                    使用享元（Flyweight）自定义Collection和Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.8" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#集合功能">
            
                    
                        <b>1.37.8.</b>
                    
                    集合功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.9" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#可选操作">
            
                    
                        <b>1.37.9.</b>
                    
                    可选操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.10" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#Set和存储顺序">
            
                    
                        <b>1.37.10.</b>
                    
                    Set和存储顺序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.11" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#队列">
            
                    
                        <b>1.37.11.</b>
                    
                    队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.12" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#理解Map">
            
                    
                        <b>1.37.12.</b>
                    
                    理解Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.13" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#集合工具类">
            
                    
                        <b>1.37.13.</b>
                    
                    集合工具类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.14" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#持有引用">
            
                    
                        <b>1.37.14.</b>
                    
                    持有引用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.15" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#避免旧式类库">
            
                    
                        <b>1.37.15.</b>
                    
                    Java 1.0 / 1.1 的集合类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.16" data-path="Appendix-Collection-Topics.html">
            
                <a href="Appendix-Collection-Topics.html#本章小结">
            
                    
                        <b>1.37.16.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.38" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html">
            
                    
                        <b>1.38.</b>
                    
                    附录:并发底层原理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.38.1" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#线程">
            
                    
                        <b>1.38.1.</b>
                    
                    线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.2" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#异常捕获">
            
                    
                        <b>1.38.2.</b>
                    
                    异常捕获
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.3" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#资源共享">
            
                    
                        <b>1.38.3.</b>
                    
                    资源共享
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.4" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#volatile关键字">
            
                    
                        <b>1.38.4.</b>
                    
                    volatile关键字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.5" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#原子性">
            
                    
                        <b>1.38.5.</b>
                    
                    原子性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.6" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#临界区">
            
                    
                        <b>1.38.6.</b>
                    
                    临界区
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.7" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#库组件">
            
                    
                        <b>1.38.7.</b>
                    
                    库组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.8" data-path="Appendix-Low-Level-Concurrency.html">
            
                <a href="Appendix-Low-Level-Concurrency.html#本章小结">
            
                    
                        <b>1.38.8.</b>
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.39" data-path="Appendix-Data-Compression.html">
            
                <a href="Appendix-Data-Compression.html">
            
                    
                        <b>1.39.</b>
                    
                    附录:数据压缩
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.39.1" data-path="Appendix-Data-Compression.html">
            
                <a href="Appendix-Data-Compression.html#使用Gzip简单压缩">
            
                    
                        <b>1.39.1.</b>
                    
                    使用Gzip简单压缩
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.39.2" data-path="Appendix-Data-Compression.html">
            
                <a href="Appendix-Data-Compression.html#使用zip多文件存储">
            
                    
                        <b>1.39.2.</b>
                    
                    使用zip多文件存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.39.3" data-path="Appendix-Data-Compression.html">
            
                <a href="Appendix-Data-Compression.html#Java的jar">
            
                    
                        <b>1.39.3.</b>
                    
                    Java的jar
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.40" data-path="Appendix-Object-Serialization.html">
            
                <a href="Appendix-Object-Serialization.html">
            
                    
                        <b>1.40.</b>
                    
                    附录:对象序列化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.40.1" data-path="Appendix-Object-Serialization.html">
            
                <a href="Appendix-Object-Serialization.html#查找类">
            
                    
                        <b>1.40.1.</b>
                    
                    查找类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.40.2" data-path="Appendix-Object-Serialization.html">
            
                <a href="Appendix-Object-Serialization.html#控制序列化">
            
                    
                        <b>1.40.2.</b>
                    
                    控制序列化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.40.3" data-path="Appendix-Object-Serialization.html">
            
                <a href="Appendix-Object-Serialization.html#使用持久化">
            
                    
                        <b>1.40.3.</b>
                    
                    使用持久化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.41" data-path="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                <a href="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                    
                        <b>1.41.</b>
                    
                    附录:静态语言类型检查
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.41.1" data-path="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                <a href="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html#前言">
            
                    
                        <b>1.41.1.</b>
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.41.2" data-path="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                <a href="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html#静态类型检查和测试">
            
                    
                        <b>1.41.2.</b>
                    
                    静态类型检查和测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.41.3" data-path="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                <a href="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html#如何提升打字">
            
                    
                        <b>1.41.3.</b>
                    
                    如何提升打字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.41.4" data-path="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                <a href="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html#生产力的成本">
            
                    
                        <b>1.41.4.</b>
                    
                    生产力的成本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.41.5" data-path="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html">
            
                <a href="Appendix-Benefits-and-Costs-of-Static-Type-Checking.html#静态和动态">
            
                    
                        <b>1.41.5.</b>
                    
                    静态和动态
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.42" data-path="Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java.html">
            
                <a href="Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java.html">
            
                    
                        <b>1.42.</b>
                    
                    附录:C++和Java的优良传统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html">
            
                    
                        <b>1.43.</b>
                    
                    附录:成为一名程序员
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.43.1" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html#如何开始">
            
                    
                        <b>1.43.1.</b>
                    
                    如何开始
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43.2" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html#码农生涯">
            
                    
                        <b>1.43.2.</b>
                    
                    码农生涯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43.3" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html#百分之五的神话">
            
                    
                        <b>1.43.3.</b>
                    
                    百分之五的神话
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43.4" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html#重在动手">
            
                    
                        <b>1.43.4.</b>
                    
                    重在动手
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43.5" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html#像打字般编程">
            
                    
                        <b>1.43.5.</b>
                    
                    像打字般编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43.6" data-path="Appendix-Becoming-a-Programmer.html">
            
                <a href="Appendix-Becoming-a-Programmer.html#做你喜欢的事">
            
                    
                        <b>1.43.6.</b>
                    
                    做你喜欢的事
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.44" data-path="GLOSSARY.html">
            
                <a href="GLOSSARY.html">
            
                    
                        <b>1.44.</b>
                    
                    词汇表
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >第十四章 流式编程</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x7B2C;&#x5341;&#x56DB;&#x7AE0;-&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;"><b>1. </b>&#x7B2C;&#x5341;&#x56DB;&#x7AE0; &#x6D41;&#x5F0F;&#x7F16;&#x7A0B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6D41;&#x652F;&#x6301;"><b>1.1. </b>&#x6D41;&#x652F;&#x6301;</a></li><li><span class="title-icon "></span><a href="#&#x6D41;&#x521B;&#x5EFA;"><b>1.2. </b>&#x6D41;&#x521B;&#x5EFA;</a></li><ul><li><span class="title-icon "></span><a href="#&#x968F;&#x673A;&#x6570;&#x6D41;"><b>1.2.1. </b>&#x968F;&#x673A;&#x6570;&#x6D41;</a></li><li><span class="title-icon "></span><a href="#int-&#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;"><b>1.2.2. </b>int &#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;</a></li><li><span class="title-icon "></span><a href="#generate"><b>1.2.3. </b>generate()</a></li><li><span class="title-icon "></span><a href="#iterate"><b>1.2.4. </b>iterate()</a></li><li><span class="title-icon "></span><a href="#&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;"><b>1.2.5. </b>&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</a></li><li><span class="title-icon "></span><a href="#arrays"><b>1.2.6. </b>Arrays</a></li><li><span class="title-icon "></span><a href="#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><b>1.2.7. </b>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</a></li></ul><li><span class="title-icon "></span><a href="#&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;"><b>1.3. </b>&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;"><b>1.3.1. </b>&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;</a></li><li><span class="title-icon "></span><a href="#&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;"><b>1.3.2. </b>&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;</a></li><li><span class="title-icon "></span><a href="#&#x79FB;&#x9664;&#x5143;&#x7D20;"><b>1.3.3. </b>&#x79FB;&#x9664;&#x5143;&#x7D20;</a></li><li><span class="title-icon "></span><a href="#&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;"><b>1.3.4. </b>&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;</a></li><li><span class="title-icon "></span><a href="#&#x5728;-map-&#x4E2D;&#x7EC4;&#x5408;&#x6D41;"><b>1.3.5. </b>&#x5728; map() &#x4E2D;&#x7EC4;&#x5408;&#x6D41;</a></li></ul><li><span class="title-icon "></span><a href="#optional&#x7C7B;"><b>1.4. </b>Optional&#x7C7B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4FBF;&#x5229;&#x51FD;&#x6570;"><b>1.4.1. </b>&#x4FBF;&#x5229;&#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x521B;&#x5EFA;-optional"><b>1.4.2. </b>&#x521B;&#x5EFA; Optional</a></li><li><span class="title-icon "></span><a href="#optional-&#x5BF9;&#x8C61;&#x64CD;&#x4F5C;"><b>1.4.3. </b>Optional &#x5BF9;&#x8C61;&#x64CD;&#x4F5C;</a></li><li><span class="title-icon "></span><a href="#optional-&#x6D41;"><b>1.4.4. </b>Optional &#x6D41;</a></li></ul><li><span class="title-icon "></span><a href="#&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;"><b>1.5. </b>&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6570;&#x7EC4;"><b>1.5.1. </b>&#x6570;&#x7EC4;</a></li><li><span class="title-icon "></span><a href="#&#x5FAA;&#x73AF;"><b>1.5.2. </b>&#x5FAA;&#x73AF;</a></li><li><span class="title-icon "></span><a href="#&#x96C6;&#x5408;"><b>1.5.3. </b>&#x96C6;&#x5408;</a></li><li><span class="title-icon "></span><a href="#&#x7EC4;&#x5408;"><b>1.5.4. </b>&#x7EC4;&#x5408;</a></li><li><span class="title-icon "></span><a href="#&#x5339;&#x914D;"><b>1.5.5. </b>&#x5339;&#x914D;</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x627E;"><b>1.5.6. </b>&#x67E5;&#x627E;</a></li><li><span class="title-icon "></span><a href="#&#x4FE1;&#x606F;"><b>1.5.7. </b>&#x4FE1;&#x606F;</a></li><li><span class="title-icon "></span><a href="#&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;"><b>1.5.8. </b>&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;</a></li></ul><li><span class="title-icon "></span><a href="#&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;"><b>1.6. </b>&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;</a></li></ul></ul></div><a href="#&#x7B2C;&#x5341;&#x56DB;&#x7AE0;-&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><p>[TOC]</p>
<!-- Streams -->
<h1 id="&#x7B2C;&#x5341;&#x56DB;&#x7AE0;-&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;"><a name="&#x7B2C;&#x5341;&#x56DB;&#x7AE0;-&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x7B2C;&#x5341;&#x56DB;&#x7AE0;-&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x7B2C;&#x5341;&#x56DB;&#x7AE0; &#x6D41;&#x5F0F;&#x7F16;&#x7A0B;</h1>
<blockquote>
<p>&#x96C6;&#x5408;&#x4F18;&#x5316;&#x4E86;&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x6D41;&#x548C;&#x5BF9;&#x8C61;&#x7684;&#x5904;&#x7406;&#x6709;&#x5173;&#x3002;</p>
</blockquote>
<p>&#x6D41;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x4E0E;&#x7279;&#x5B9A;&#x5B58;&#x50A8;&#x673A;&#x5236;&#x65E0;&#x5173;&#x7684;&#x5143;&#x7D20;&#x2014;&#x2014;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x6D41;&#x5E76;&#x6CA1;&#x6709;&#x201C;&#x5B58;&#x50A8;&#x201D;&#x4E4B;&#x8BF4;&#x3002;</p>
<p>&#x5229;&#x7528;&#x6D41;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x8FED;&#x4EE3;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x63D0;&#x53D6;&#x548C;&#x64CD;&#x4F5C;&#x5B83;&#x4EEC;&#x3002;&#x8FD9;&#x4E9B;&#x7BA1;&#x9053;&#x901A;&#x5E38;&#x88AB;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5728;&#x6D41;&#x4E0A;&#x5F62;&#x6210;&#x4E00;&#x6761;&#x64CD;&#x4F5C;&#x7BA1;&#x9053;&#x3002;</p>
<p>&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x5728;&#x96C6;&#x5408;&#x4E2D;&#x662F;&#x4E3A;&#x4E86;&#x5904;&#x7406;&#x4ED6;&#x4EEC;&#xFF0C;&#x56E0;&#x6B64;&#x4F60;&#x5C06;&#x4F1A;&#x53D1;&#x73B0;&#x4F60;&#x5C06;&#x628A;&#x7F16;&#x7A0B;&#x7684;&#x4E3B;&#x8981;&#x7126;&#x70B9;&#x4ECE;&#x96C6;&#x5408;&#x8F6C;&#x79FB;&#x5230;&#x4E86;&#x6D41;&#x4E0A;&#x3002;&#x6D41;&#x7684;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;&#x597D;&#x5904;&#x662F;&#xFF0C;&#x5B83;&#x4F7F;&#x5F97;&#x7A0B;&#x5E8F;&#x66F4;&#x52A0;&#x77ED;&#x5C0F;&#x5E76;&#x4E14;&#x66F4;&#x6613;&#x7406;&#x89E3;&#x3002;&#x5F53; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#xFF08;method references&#xFF09;&#x548C;&#x6D41;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8BA9;&#x4EBA;&#x611F;&#x89C9;&#x81EA;&#x6210;&#x4E00;&#x4F53;&#x3002;&#x6D41;&#x4F7F;&#x5F97; Java 8 &#x66F4;&#x5177;&#x5438;&#x5F15;&#x529B;&#x3002;</p>
<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x5047;&#x5982;&#x4F60;&#x8981;&#x968F;&#x673A;&#x5C55;&#x793A; 5 &#x81F3; 20 &#x4E4B;&#x95F4;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x6574;&#x6570;&#x5E76;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x4F60;&#x7684;&#x5173;&#x6CE8;&#x70B9;&#x9996;&#x5148;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x3002;&#x56F4;&#x7ED5;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x9648;&#x8FF0;&#x4F60;&#x60F3;&#x505A;&#x4EC0;&#x4E48;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Randoms.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Randoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>6
10
13
16
17
18
19
</code></pre><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x7ED9; <strong>Random</strong> &#x5BF9;&#x8C61;&#x4E00;&#x4E2A;&#x79CD;&#x5B50;&#xFF08;&#x4EE5;&#x4FBF;&#x7A0B;&#x5E8F;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x65F6;&#x4EA7;&#x751F;&#x76F8;&#x540C;&#x7684;&#x8F93;&#x51FA;&#xFF09;&#x3002;<code>ints()</code> &#x65B9;&#x6CD5;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6D41;&#x5E76;&#x4E14; <code>ints()</code> &#x65B9;&#x6CD5;&#x6709;&#x591A;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x91CD;&#x8F7D; &#x2014; &#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x9650;&#x5B9A;&#x4E86;&#x6570;&#x503C;&#x4EA7;&#x751F;&#x7684;&#x8FB9;&#x754C;&#x3002;&#x8FD9;&#x5C06;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E2D;&#x95F4;&#x6D41;&#x64CD;&#x4F5C;&#xFF08;intermediate stream operation&#xFF09; <code>distinct()</code> &#x6765;&#x83B7;&#x53D6;&#x5B83;&#x4EEC;&#x7684;&#x975E;&#x91CD;&#x590D;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; <code>limit()</code> &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x524D; 7 &#x4E2A;&#x5143;&#x7D20;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>sorted()</code> &#x65B9;&#x6CD5;&#x6392;&#x5E8F;&#x3002;&#x6700;&#x7EC8;&#x4F7F;&#x7528; <code>forEach()</code> &#x65B9;&#x6CD5;&#x904D;&#x5386;&#x8F93;&#x51FA;&#xFF0C;&#x5B83;&#x6839;&#x636E;&#x4F20;&#x9012;&#x7ED9;&#x5B83;&#x7684;&#x51FD;&#x6570;&#x5BF9;&#x6BCF;&#x4E2A;&#x6D41;&#x5BF9;&#x8C61;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F20;&#x9012;&#x4E86;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x663E;&#x793A;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x3002;<code>System.out::println</code> &#x3002;</p>
<p>&#x6CE8;&#x610F; <code>Randoms.java</code> &#x4E2D;&#x6CA1;&#x6709;&#x58F0;&#x660E;&#x4EFB;&#x4F55;&#x53D8;&#x91CF;&#x3002;&#x6D41;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x4F7F;&#x7528;&#x8D4B;&#x503C;&#x6216;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x6709;&#x72B6;&#x6001;&#x7684;&#x7CFB;&#x7EDF;&#x5EFA;&#x6A21;&#xFF0C;&#x8FD9;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<p>&#x58F0;&#x660E;&#x5F0F;&#x7F16;&#x7A0B;&#xFF08;Declarative programming&#xFF09;&#x662F;&#x4E00;&#x79CD;&#xFF1A;&#x58F0;&#x660E;&#x8981;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x800C;&#x975E;&#x600E;&#x4E48;&#x505A;&#x7684;&#x7F16;&#x7A0B;&#x98CE;&#x683C;&#x3002;&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x4E2D;&#x6240;&#x770B;&#x5230;&#x7684;&#x3002;<strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x547D;&#x4EE4;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x5F62;&#x5F0F;&#x66F4;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/ImperativeRandoms.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImperativeRandoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> rints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>rints<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> r <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>r <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
            rints<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rints<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>[7, 8, 9, 11, 13, 15, 18]
</code></pre><p>&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x5B9A;&#x4E49;&#x4EFB;&#x4F55;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x4E86; 3 &#x4E2A;&#x53D8;&#x91CF;&#xFF1A; <code>rand</code>&#xFF0C;<code>rints</code> &#x548C; <code>r</code>&#x3002;&#x7531;&#x4E8E; <code>nextInt()</code> &#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x4E0B;&#x9650;&#x7684;&#x539F;&#x56E0;&#xFF08;&#x5176;&#x5185;&#x7F6E;&#x7684;&#x4E0B;&#x9650;&#x6C38;&#x8FDC;&#x4E3A; 0&#xFF09;&#xFF0C;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x66F4;&#x590D;&#x6742;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x751F;&#x6210;&#x989D;&#x5916;&#x7684;&#x503C;&#x6765;&#x8FC7;&#x6EE4;&#x5C0F;&#x4E8E; 5 &#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x7814;&#x7A76;&#x7A0B;&#x5E8F;&#x7684;&#x771F;&#x6B63;&#x610F;&#x56FE;&#xFF0C;&#x800C;&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x4EE3;&#x7801;&#x53EA;&#x662F;&#x544A;&#x8BC9;&#x4E86;&#x4F60;&#x5B83;&#x6B63;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#x3002;&#x8FD9;&#x79CD;&#x8BED;&#x4E49;&#x6E05;&#x6670;&#x6027;&#x4E5F;&#x662F; Java 8 &#x7684;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#x66F4;&#x53D7;&#x63A8;&#x5D07;&#x7684;&#x91CD;&#x8981;&#x539F;&#x56E0;&#x3002;</p>
<p>&#x5728; <code>ImperativeRandoms.java</code> &#x4E2D;&#x663E;&#x5F0F;&#x5730;&#x7F16;&#x5199;&#x8FED;&#x4EE3;&#x673A;&#x5236;&#x79F0;&#x4E3A;&#x5916;&#x90E8;&#x8FED;&#x4EE3;&#x3002;&#x800C;&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#x91C7;&#x7528;&#x5185;&#x90E8;&#x8FED;&#x4EE3;&#xFF0C;&#x8FD9;&#x662F;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x6838;&#x5FC3;&#x7279;&#x6027;&#x4E4B;&#x4E00;&#x3002;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x4F7F;&#x5F97;&#x7F16;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x8BFB;&#x6027;&#x66F4;&#x5F3A;&#xFF0C;&#x4E5F;&#x66F4;&#x80FD;&#x5229;&#x7528;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x901A;&#x8FC7;&#x653E;&#x5F03;&#x5BF9;&#x8FED;&#x4EE3;&#x8FC7;&#x7A0B;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x63A7;&#x5236;&#x6743;&#x4EA4;&#x7ED9;&#x5E76;&#x884C;&#x5316;&#x673A;&#x5236;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5728;<a href="24-Concurrent-Programming.html">&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a>&#x4E00;&#x7AE0;&#x4E2D;&#x5B66;&#x4E60;&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x65B9;&#x9762;&#xFF0C;&#x6D41;&#x662F;&#x61D2;&#x52A0;&#x8F7D;&#x7684;&#x3002;&#x8FD9;&#x4EE3;&#x8868;&#x7740;&#x5B83;&#x53EA;&#x5728;&#x7EDD;&#x5BF9;&#x5FC5;&#x8981;&#x65F6;&#x624D;&#x8BA1;&#x7B97;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x6D41;&#x770B;&#x4F5C;&#x201C;&#x5EF6;&#x8FDF;&#x5217;&#x8868;&#x201D;&#x3002;&#x7531;&#x4E8E;&#x8BA1;&#x7B97;&#x5EF6;&#x8FDF;&#xFF0C;&#x6D41;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x8868;&#x793A;&#x975E;&#x5E38;&#x5927;&#xFF08;&#x751A;&#x81F3;&#x65E0;&#x9650;&#xFF09;&#x7684;&#x5E8F;&#x5217;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x8003;&#x8651;&#x5185;&#x5B58;&#x95EE;&#x9898;&#x3002;</p>
<!-- Java 8 Stream Support -->
<h2 id="&#x6D41;&#x652F;&#x6301;"><a name="&#x6D41;&#x652F;&#x6301;" class="anchor-navigation-ex-anchor" href="#&#x6D41;&#x652F;&#x6301;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x6D41;&#x652F;&#x6301;</h2>
<p>Java &#x8BBE;&#x8BA1;&#x8005;&#x9762;&#x4E34;&#x7740;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x96BE;&#x9898;&#xFF1A;&#x73B0;&#x5B58;&#x7684;&#x5927;&#x91CF;&#x7C7B;&#x5E93;&#x4E0D;&#x4EC5;&#x4E3A; Java &#x6240;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x88AB;&#x5E94;&#x7528;&#x5728;&#x6574;&#x4E2A; Java &#x751F;&#x6001;&#x5708;&#x6570;&#x767E;&#x4E07;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x3002;&#x5982;&#x4F55;&#x5C06;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x6D41;&#x7684;&#x6982;&#x5FF5;&#x878D;&#x5165;&#x5230;&#x73B0;&#x6709;&#x7C7B;&#x5E93;&#x4E2D;&#x5462;&#xFF1F;</p>
<p>&#x6BD4;&#x5982;&#x5728; <strong>Random</strong> &#x4E2D;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x53EA;&#x8981;&#x4E0D;&#x6539;&#x53D8;&#x539F;&#x6709;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x73B0;&#x6709;&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x4F1A;&#x53D7;&#x5230;&#x5E72;&#x6270;&#x3002;</p>
<p>&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x63A5;&#x53E3;&#x90E8;&#x5206;&#x600E;&#x4E48;&#x6539;&#x9020;&#x5462;&#xFF1F;&#x7279;&#x522B;&#x662F;&#x6D89;&#x53CA;&#x96C6;&#x5408;&#x7C7B;&#x63A5;&#x53E3;&#x7684;&#x90E8;&#x5206;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x628A;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x8F6C;&#x6362;&#x4E3A;&#x6D41;&#xFF0C;&#x76F4;&#x63A5;&#x5411;&#x63A5;&#x53E3;&#x6DFB;&#x52A0;&#x65B0;&#x65B9;&#x6CD5;&#x4F1A;&#x7834;&#x574F;&#x6240;&#x6709;&#x8001;&#x7684;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;</p>
<p>Java 8 &#x91C7;&#x7528;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#xFF1A;&#x5728;<a href="10-Interfaces.html">&#x63A5;&#x53E3;</a>&#x4E2D;&#x6DFB;&#x52A0;&#x88AB; <code>default</code>&#xFF08;<code>&#x9ED8;&#x8BA4;</code>&#xFF09;&#x4FEE;&#x9970;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x8BBE;&#x8BA1;&#x8005;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x6D41;&#x5F0F;&#xFF08;<em>stream</em>&#xFF09;&#x65B9;&#x6CD5;&#x5E73;&#x6ED1;&#x5730;&#x5D4C;&#x5165;&#x5230;&#x73B0;&#x6709;&#x7C7B;&#x4E2D;&#x3002;&#x6D41;&#x65B9;&#x6CD5;&#x9884;&#x7F6E;&#x7684;&#x64CD;&#x4F5C;&#x51E0;&#x4E4E;&#x5DF2;&#x6EE1;&#x8DB3;&#x4E86;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x6240;&#x6709;&#x7684;&#x9700;&#x6C42;&#x3002;&#x6D41;&#x64CD;&#x4F5C;&#x7684;&#x7C7B;&#x578B;&#x6709;&#x4E09;&#x79CD;&#xFF1A;&#x521B;&#x5EFA;&#x6D41;&#xFF0C;&#x4FEE;&#x6539;&#x6D41;&#x5143;&#x7D20;&#xFF08;&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;&#xFF0C; Intermediate Operations&#xFF09;&#xFF0C;&#x6D88;&#x8D39;&#x6D41;&#x5143;&#x7D20;&#xFF08;&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;&#xFF0C; Terminal Operations&#xFF09;&#x3002;&#x6700;&#x540E;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x901A;&#x5E38;&#x610F;&#x5473;&#x7740;&#x6536;&#x96C6;&#x6D41;&#x5143;&#x7D20;&#xFF08;&#x901A;&#x5E38;&#x662F;&#x5230;&#x96C6;&#x5408;&#x4E2D;&#xFF09;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x6BCF;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x64CD;&#x4F5C;&#x3002;</p>
<!-- Stream Creation -->
<h2 id="&#x6D41;&#x521B;&#x5EFA;"><a name="&#x6D41;&#x521B;&#x5EFA;" class="anchor-navigation-ex-anchor" href="#&#x6D41;&#x521B;&#x5EFA;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x6D41;&#x521B;&#x5EFA;</h2>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>Stream.of()</code> &#x5F88;&#x5BB9;&#x6613;&#x5730;&#x5C06;&#x4E00;&#x7EC4;&#x5143;&#x7D20;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6D41;&#xFF08;<code>Bubble</code> &#x7C7B;&#x5728;&#x672C;&#x7AE0;&#x7684;&#x540E;&#x9762;&#x5B9A;&#x4E49;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/StreamOf.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOf</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;It&apos;s &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wonderful &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;day &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;for &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pie!&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">2.718</span><span class="token punctuation">,</span> <span class="token number">1.618</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Bubble(1)
Bubble(2)
Bubble(3)
It&apos;s a wonderful day for pie!
3.14159
2.718
1.618
</code></pre><p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6BCF;&#x4E2A;&#x96C6;&#x5408;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528; <code>stream()</code> &#x65B9;&#x6CD5;&#x6765;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6D41;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/CollectionToStream.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionToStream</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bubble</span><span class="token punctuation">&gt;</span></span> bubbles <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bubbles<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span>b <span class="token operator">-&gt;</span> b<span class="token punctuation">.</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;It&apos;s a wonderful day for pie!&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        w<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;pi&quot;</span><span class="token punctuation">,</span> <span class="token number">3.14159</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token number">2.718</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;phi&quot;</span><span class="token punctuation">,</span> <span class="token number">1.618</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>6
a pie! It&apos;s for wonderful day
phi: 1.618
e: 2.718
pi: 3.14159
</code></pre><p>&#x5728;&#x521B;&#x5EFA; <code>List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Bubble</span><span class="token punctuation">&gt;</span></span></code> &#x5BF9;&#x8C61;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x5730;&#x8C03;&#x7528;&#x6240;&#x6709;&#x96C6;&#x5408;&#x4E2D;&#x90FD;&#x6709;&#x7684; <code>stream()</code>&#x3002;&#x4E2D;&#x95F4;&#x64CD;&#x4F5C; <code>map()</code> &#x4F1A;&#x83B7;&#x53D6;&#x6D41;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;&#x6D41;&#x4E2D;&#x5143;&#x7D20;&#x5E94;&#x7528;&#x64CD;&#x4F5C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x65B0;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x9012;&#x5230;&#x540E;&#x7EED;&#x7684;&#x6D41;&#x4E2D;&#x3002;&#x901A;&#x5E38; <code>map()</code> &#x4F1A;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x5E76;&#x4EA7;&#x751F;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x4EA7;&#x751F;&#x4E86;&#x7279;&#x6B8A;&#x7684;&#x7528;&#x4E8E;&#x6570;&#x503C;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x3002;&#x4F8B;&#x5982;&#xFF0C;<code>mapToInt()</code> &#x65B9;&#x6CD5;&#x5C06;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6D41;&#xFF08;object stream&#xFF09;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x5305;&#x542B;&#x6574;&#x578B;&#x6570;&#x5B57;&#x7684; <code>IntStream</code>&#x3002;&#x540C;&#x6837;&#xFF0C;&#x9488;&#x5BF9; <code>Float</code> &#x548C; <code>Double</code> &#x4E5F;&#x6709;&#x7C7B;&#x4F3C;&#x540D;&#x5B57;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x7684; <code>split()</code>&#xFF08;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x6839;&#x636E;&#x53C2;&#x6570;&#x6765;&#x62C6;&#x5206;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x6765;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x53D8;&#x91CF; <code>w</code>&#x3002;&#x7A0D;&#x540E;&#x4F60;&#x4F1A;&#x77E5;&#x9053; <code>split()</code> &#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x5341;&#x5206;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x6839;&#x636E;&#x7A7A;&#x683C;&#x6765;&#x5206;&#x5272;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x4ECE; <strong>Map</strong> &#x96C6;&#x5408;&#x4E2D;&#x4EA7;&#x751F;&#x6D41;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8C03;&#x7528; <code>entrySet()</code> &#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6D41;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x5305;&#x542B;&#x4E00;&#x4E2A; <code>key</code> &#x952E;&#x4EE5;&#x53CA;&#x4E0E;&#x5176;&#x76F8;&#x5173;&#x8054;&#x7684; <code>value</code> &#x503C;&#x3002;&#x7136;&#x540E;&#x5206;&#x522B;&#x8C03;&#x7528; <code>getKey()</code> &#x548C; <code>getValue()</code> &#x83B7;&#x53D6;&#x503C;&#x3002;</p>
<h3 id="&#x968F;&#x673A;&#x6570;&#x6D41;"><a name="&#x968F;&#x673A;&#x6570;&#x6D41;" class="anchor-navigation-ex-anchor" href="#&#x968F;&#x673A;&#x6570;&#x6D41;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x968F;&#x673A;&#x6570;&#x6D41;</h3>
<p><code>Random</code> &#x7C7B;&#x88AB;&#x4E00;&#x7EC4;&#x751F;&#x6210;&#x6D41;&#x7684;&#x65B9;&#x6CD5;&#x589E;&#x5F3A;&#x4E86;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/RandomGenerators.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomGenerators</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stream
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;++++++++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x63A7;&#x5236;&#x4E0A;&#x9650;&#x548C;&#x4E0B;&#x9650;&#xFF1A;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x63A7;&#x5236;&#x6D41;&#x5927;&#x5C0F;&#xFF1A;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x63A7;&#x5236;&#x6D41;&#x7684;&#x5927;&#x5C0F;&#x548C;&#x754C;&#x9650;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11.5</span><span class="token punctuation">,</span> <span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>-1172028779
1717241110
-2014573909
229403722
++++++++
2955289354441303771
3476817843704654257
-8917117694134521474
4941259272818818752
++++++++
0.2613610344283964
0.0508673570556899
0.8037155449603999
0.7620665811558285
++++++++
16
10
11
12
++++++++
65
99
54
58
++++++++
29.86777681078574
24.83968447804611
20.09247112332014
24.046793846338723
++++++++
1169976606
1947946283
++++++++
2970202997824602425
-2325326920272830366
++++++++
0.7024254510631527
0.6648552384607359
++++++++
6
7
7
++++++++
17
12
20
++++++++
12.27872414236691
11.732085449736195
12.196509449817267
++++++++
</code></pre><p>&#x4E3A;&#x4E86;&#x6D88;&#x9664;&#x5197;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x6CDB;&#x578B;&#x65B9;&#x6CD5; <code>show(Stream<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> stream)</code> &#xFF08;&#x5728;&#x8BB2;&#x89E3;&#x6CDB;&#x578B;&#x4E4B;&#x524D;&#x5C31;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x786E;&#x5B9E;&#x6709;&#x70B9;&#x4F5C;&#x5F0A;&#xFF0C;&#x4F46;&#x662F;&#x56DE;&#x62A5;&#x662F;&#x503C;&#x5F97;&#x7684;&#xFF09;&#x3002;&#x7C7B;&#x578B;&#x53C2;&#x6570; <code>T</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9; <strong>Integer</strong>&#x3001;<strong>Long</strong> &#x548C; <strong>Double</strong> &#x7C7B;&#x578B;&#x90FD;&#x751F;&#x6548;&#x3002;&#x4F46;&#x662F; <strong>Random</strong> &#x7C7B;&#x53EA;&#x80FD;&#x751F;&#x6210;&#x57FA;&#x672C;&#x7C7B;&#x578B; <strong>int</strong>&#xFF0C; <strong>long</strong>&#xFF0C; <strong>double</strong> &#x7684;&#x6D41;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C; <code>boxed()</code> &#x6D41;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x81EA;&#x52A8;&#x5730;&#x628A;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x6210;&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x88C5;&#x7BB1;&#x7C7B;&#x578B;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97; <code>show()</code> &#x80FD;&#x591F;&#x63A5;&#x53D7;&#x6D41;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <strong>Random</strong> &#x4E3A;&#x4EFB;&#x610F;&#x5BF9;&#x8C61;&#x96C6;&#x5408;&#x521B;&#x5EFA; <strong>Supplier</strong>&#x3002;&#x5982;&#x4E0B;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x63D0;&#x4F9B;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p>Cheese.dat &#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;</p>
<pre class="language-"><code>// streams/Cheese.dat
Not much of a cheese shop really, is it?
Finest in the district, sir.
And what leads you to that conclusion?
Well, it&apos;s so clean.
It&apos;s certainly uncontaminated by cheese.
</code></pre><p>&#x6211;&#x4EEC;&#x901A;&#x8FC7; <strong>File</strong> &#x7C7B;&#x5C06; Cheese.dat &#x6587;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x884C;&#x8BFB;&#x53D6;&#x5230; <code>List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String</span><span class="token punctuation">&gt;</span></span></code> &#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/RandomWords.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomWords</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RandomWords</span><span class="token punctuation">(</span><span class="token class-name">String</span> fname<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lines <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllLines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>fname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x7565;&#x8FC7;&#x7B2C;&#x4E00;&#x884C;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> line <span class="token operator">:</span> lines<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> lines<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> word <span class="token operator">:</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;[ .?,]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                words<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> words<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>words<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> words<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
            <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RandomWords</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>it shop sir the much cheese by conclusion district is
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x66F4;&#x4E3A;&#x590D;&#x6742;&#x7684; <code>split()</code> &#x8FD0;&#x7528;&#x3002;&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x884C;&#x90FD;&#x88AB; <code>split()</code> &#x901A;&#x8FC7;&#x7A7A;&#x683C;&#x6216;&#x8005;&#x88AB;&#x65B9;&#x62EC;&#x53F7;&#x5305;&#x88F9;&#x7684;&#x4EFB;&#x610F;&#x6807;&#x70B9;&#x7B26;&#x53F7;&#x8FDB;&#x884C;&#x5206;&#x5272;&#x3002;&#x5728;&#x7ED3;&#x675F;&#x65B9;&#x62EC;&#x53F7;&#x540E;&#x9762;&#x7684; <code>+</code> &#x4EE3;&#x8868; <code>+</code> &#x524D;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#x6216;&#x8005;&#x591A;&#x6B21;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x5230;&#x5728;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#x5FAA;&#x73AF;&#x4F53;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x5F0F;&#x7F16;&#x7A0B;&#xFF08;&#x5916;&#x90E8;&#x8FED;&#x4EE3;&#xFF09;&#x3002;&#x5728;&#x4EE5;&#x540E;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x4F60;&#x751A;&#x81F3;&#x4F1A;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x6D88;&#x9664;&#x8FD9;&#x4E00;&#x70B9;&#x3002;&#x8FD9;&#x79CD;&#x65E7;&#x7684;&#x5F62;&#x5F0F;&#x867D;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x7CDF;&#x7CD5;&#xFF0C;&#x4F46;&#x4F7F;&#x7528;&#x6D41;&#x4F1A;&#x8BA9;&#x4EBA;&#x611F;&#x89C9;&#x66F4;&#x597D;&#x3002;</p>
<p>&#x5728; <code>toString()</code> &#x548C;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#x4F60;&#x770B;&#x5230;&#x4E86; <code>collect()</code> &#x6536;&#x96C6;&#x64CD;&#x4F5C;&#xFF0C;&#x5B83;&#x6839;&#x636E;&#x53C2;&#x6570;&#x6765;&#x7EC4;&#x5408;&#x6240;&#x6709;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x4F7F;&#x7528; <strong>Collectors.</strong><code>joining()</code>&#xFF0C;&#x4F60;&#x5C06;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A; <code>String</code> &#x7C7B;&#x578B;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x6839;&#x636E; <code>joining()</code> &#x7684;&#x53C2;&#x6570;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x5272;&#x3002;&#x8FD8;&#x6709;&#x8BB8;&#x591A;&#x4E0D;&#x540C;&#x7684; <code>Collectors</code> &#x7528;&#x4E8E;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x5728;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x524D;&#x770B;&#x5230;&#x4E86; <strong>Stream.</strong><code>generate()</code> &#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x628A;&#x4EFB;&#x610F;  <code>Supplier<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code> &#x7528;&#x4E8E;&#x751F;&#x6210; <code>T</code> &#x7C7B;&#x578B;&#x7684;&#x6D41;&#x3002;</p>
<h3 id="int-&#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;"><a name="int-&#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;" class="anchor-navigation-ex-anchor" href="#int-&#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. int &#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;</h3>
<p><code>IntStream</code> &#x7C7B;&#x63D0;&#x4F9B;&#x4E86;  <code>range()</code> &#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x6574;&#x578B;&#x5E8F;&#x5217;&#x7684;&#x6D41;&#x3002;&#x7F16;&#x5199;&#x5FAA;&#x73AF;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x66F4;&#x52A0;&#x4FBF;&#x5229;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Ranges.java</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">IntStream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ranges</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x4F20;&#x7EDF;&#x65B9;&#x6CD5;:</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            result <span class="token operator">+=</span> i<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// for-in &#x5FAA;&#x73AF;:</span>
        result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            result <span class="token operator">+=</span> i<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x4F7F;&#x7528;&#x6D41;:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>145
145
145
</code></pre><p>&#x5728;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x6211;&#x4EEC;&#x4F20;&#x7EDF;&#x7F16;&#x5199; <code>for</code> &#x5FAA;&#x73AF;&#x7684;&#x65B9;&#x5F0F;&#xFF1B;&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>range()</code> &#x521B;&#x5EFA;&#x4E86;&#x6D41;&#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x5316;&#x4E3A;&#x6570;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x5728; <code>for-in</code> &#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x4F7F;&#x7528;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x80FD;&#x50CF;&#x7B2C;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;&#x90A3;&#x6837;&#x5168;&#x7A0B;&#x4F7F;&#x7528;&#x6D41;&#x662F;&#x66F4;&#x597D;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5BF9;&#x8303;&#x56F4;&#x4E2D;&#x7684;&#x6570;&#x5B57;&#x8FDB;&#x884C;&#x6C42;&#x548C;&#x3002;&#x5728;&#x6D41;&#x4E2D;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528; <code>sum()</code> &#x64CD;&#x4F5C;&#x6C42;&#x548C;&#x3002;</p>
<p>&#x6CE8;&#x610F; <strong>IntStream.</strong><code>range()</code> &#x76F8;&#x6BD4; <code>onjava.Range.range()</code> &#x62E5;&#x6709;&#x66F4;&#x591A;&#x7684;&#x9650;&#x5236;&#x3002;&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x5176;&#x53EF;&#x9009;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x540E;&#x8005;&#x5141;&#x8BB8;&#x6B65;&#x957F;&#x5927;&#x4E8E; 1&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x6765;&#x751F;&#x6210;&#x3002;</p>
<p>&#x5B9E;&#x7528;&#x5C0F;&#x529F;&#x80FD; <code>repeat()</code> &#x53EF;&#x4EE5;&#x7528;&#x6765;&#x66FF;&#x6362;&#x7B80;&#x5355;&#x7684; <code>for</code> &#x5FAA;&#x73AF;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// onjava/Repeat.java</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">IntStream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Repeat</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token class-name">Runnable</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> action<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5176;&#x4EA7;&#x751F;&#x7684;&#x5FAA;&#x73AF;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Looping.java</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">Repeat</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Looping</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Looping!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">Looping</span><span class="token operator">::</span><span class="token function">hi</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Looping!
Looping!
Looping!
Hi!
Hi!
</code></pre><p>&#x539F;&#x5219;&#x4E0A;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5305;&#x542B;&#x5E76;&#x89E3;&#x91CA; <code>repeat()</code> &#x5E76;&#x4E0D;&#x503C;&#x5F97;&#x3002;&#x8BDA;&#x7136;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x900F;&#x660E;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x7684;&#x56E2;&#x961F;&#x548C;&#x516C;&#x53F8;&#x7684;&#x8FD0;&#x4F5C;&#x65B9;&#x5F0F;&#x3002;</p>
<h3 id="generate"><a name="generate" class="anchor-navigation-ex-anchor" href="#generate"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. generate()</h3>
<p>&#x53C2;&#x7167; <code>RandomWords.java</code> &#x4E2D; <strong>Stream.</strong><code>generate()</code> &#x642D;&#x914D; <code>Supplier<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span></code> &#x4F7F;&#x7528;&#x7684;&#x4F8B;&#x5B50;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Generator.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Generator</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> letters <span class="token operator">=</span> <span class="token string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span> letters<span class="token punctuation">[</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>letters<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> word <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>YNZBRNYGCFOWZNTCQRGSEGZMMJMROE
</code></pre><p>&#x4F7F;&#x7528; <code>Random.nextInt()</code> &#x65B9;&#x6CD5;&#x6765;&#x6311;&#x9009;&#x5B57;&#x6BCD;&#x8868;&#x4E2D;&#x7684;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x3002;<code>Random.nextInt()</code> &#x7684;&#x53C2;&#x6570;&#x4EE3;&#x8868;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x7684;&#x6700;&#x5927;&#x7684;&#x968F;&#x673A;&#x6570;&#x8303;&#x56F4;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x8FB9;&#x754C;&#x662F;&#x7ECF;&#x8FC7;&#x6DF1;&#x601D;&#x719F;&#x8651;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8981;&#x521B;&#x5EFA;&#x5305;&#x542B;&#x76F8;&#x540C;&#x5BF9;&#x8C61;&#x7684;&#x6D41;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x751F;&#x6210;&#x90A3;&#x4E9B;&#x5BF9;&#x8C61;&#x7684; <code>lambda</code> &#x5230; <code>generate()</code> &#x4E2D;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Duplicator.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Duplicator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;duplicate&quot;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>duplicate
duplicate
duplicate
</code></pre><p>&#x5982;&#x4E0B;&#x662F;&#x5728;&#x672C;&#x7AE0;&#x4E4B;&#x524D;&#x4F8B;&#x5B50;&#x4E2D;&#x4F7F;&#x7528;&#x8FC7;&#x7684; <code>Bubble</code> &#x7C7B;&#x3002;<strong>&#x6CE8;&#x610F;</strong>&#x5B83;&#x5305;&#x542B;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x9759;&#x6001;&#x751F;&#x6210;&#x5668;&#xFF08;Static generator&#xFF09;&#x65B9;&#x6CD5;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Bubble.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bubble</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        i <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Bubble(&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Bubble</span> <span class="token function">bubbler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x7531;&#x4E8E; <code>bubbler()</code> &#x4E0E; <code>Supplier<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Bubble</span><span class="token punctuation">&gt;</span></span></code> &#x662F;&#x63A5;&#x53E3;&#x517C;&#x5BB9;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x7ED9; <strong>Stream.</strong><code>generate()</code>&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Bubbles.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bubbles</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Bubble</span><span class="token operator">::</span><span class="token function">bubbler</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Bubble(0)
Bubble(1)
Bubble(2)
Bubble(3)
Bubble(4)
</code></pre><p>&#x8FD9;&#x662F;&#x521B;&#x5EFA;&#x5355;&#x72EC;&#x5DE5;&#x5382;&#x7C7B;&#xFF08;Separate Factory class&#xFF09;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x5F88;&#x591A;&#x65B9;&#x9762;&#x5B83;&#x66F4;&#x52A0;&#x6574;&#x6D01;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x4E8E;&#x4EE3;&#x7801;&#x7EC4;&#x7EC7;&#x548C;&#x54C1;&#x5473;&#x7684;&#x95EE;&#x9898;&#x2014;&#x2014;&#x4F60;&#x603B;&#x662F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x3002;</p>
<h3 id="iterate"><a name="iterate" class="anchor-navigation-ex-anchor" href="#iterate"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. iterate()</h3>
<p><strong>Stream.</strong><code>iterate()</code> &#x4EE5;&#x79CD;&#x5B50;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF09;&#x5F00;&#x5934;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x7ED9;&#x65B9;&#x6CD5;&#xFF08;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF09;&#x3002;&#x65B9;&#x6CD5;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x6DFB;&#x52A0;&#x5230;&#x6D41;&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x4E0B;&#x6B21;&#x8C03;&#x7528; <code>iterate()</code>&#xFF0C;&#x4F9D;&#x6B21;&#x7C7B;&#x63A8;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>iterate()</code> &#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Fibonacci.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fibonacci</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> result <span class="token operator">=</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span>
            x <span class="token operator">=</span> i<span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">// &#x8FC7;&#x6EE4;&#x524D; 20 &#x4E2A;</span>
                       <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// &#x7136;&#x540E;&#x53D6; 10 &#x4E2A;</span>
                       <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>6765
10946
17711
28657
46368
75025
121393
196418
317811
514229
</code></pre><p>&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;&#x5C06;&#x6570;&#x5217;&#x4E2D;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6C42;&#x548C;&#x4EE5;&#x4EA7;&#x751F;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;<code>iterate()</code> &#x53EA;&#x80FD;&#x8BB0;&#x5FC6;&#x7ED3;&#x679C;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5229;&#x7528;&#x4E00;&#x4E2A;&#x53D8;&#x91CF; <code>x</code> &#x8FFD;&#x8E2A;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x5728;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x89C1;&#x8FC7;&#x7684; <code>skip()</code> &#x64CD;&#x4F5C;&#x3002;&#x5B83;&#x6839;&#x636E;&#x53C2;&#x6570;&#x4E22;&#x5F03;&#x6307;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x6D41;&#x5143;&#x7D20;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4E22;&#x5F03;&#x4E86;&#x524D; 20 &#x4E2A;&#x5143;&#x7D20;&#x3002;</p>
<h3 id="&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;"><a name="&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.5. &#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</h3>
<p>&#x5728;&#x5EFA;&#x9020;&#x8005;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF08;&#x4E5F;&#x79F0;&#x6784;&#x9020;&#x5668;&#x6A21;&#x5F0F;&#xFF09;&#x4E2D;&#xFF0C;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <code>builder</code> &#x5BF9;&#x8C61;&#xFF0C;&#x4F20;&#x9012;&#x7ED9;&#x5B83;&#x591A;&#x4E2A;&#x6784;&#x9020;&#x5668;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x6267;&#x884C;&#x201C;&#x6784;&#x9020;&#x201D;&#x3002;<strong>Stream</strong> &#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x8FD9;&#x6837;&#x7684; <code>Builder</code>&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x91CD;&#x65B0;&#x5BA1;&#x89C6;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FileToWordsBuilder.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWordsBuilder</span> <span class="token punctuation">{</span>
    <span class="token class-name">Stream<span class="token punctuation">.</span>Builder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FileToWordsBuilder</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// &#x7565;&#x8FC7;&#x5F00;&#x5934;&#x7684;&#x6CE8;&#x91CA;&#x884C;</span>
             <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> w <span class="token operator">:</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;[ .?,]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                      builder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">FileToWordsBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Not much of a cheese shop really
</code></pre><p><strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x6784;&#x9020;&#x5668;&#x4F1A;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5355;&#x8BCD;&#xFF08;&#x9664;&#x4E86;&#x7B2C;&#x4E00;&#x884C;&#xFF0C;&#x5B83;&#x662F;&#x5305;&#x542B;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4FE1;&#x606F;&#x7684;&#x6CE8;&#x91CA;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x5E76;&#x6CA1;&#x6709;&#x8C03;&#x7528; <code>build()</code>&#x3002;&#x53EA;&#x8981;&#x4F60;&#x4E0D;&#x8C03;&#x7528; <code>stream()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5411; <code>builder</code> &#x5BF9;&#x8C61;&#x4E2D;&#x6DFB;&#x52A0;&#x5355;&#x8BCD;&#x3002;</p>
<p>&#x5728;&#x8BE5;&#x7C7B;&#x7684;&#x66F4;&#x5B8C;&#x6574;&#x5F62;&#x5F0F;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x7528;&#x4E8E;&#x67E5;&#x770B; <code>build()</code> &#x662F;&#x5426;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x7684;&#x8BDD;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x5355;&#x8BCD;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5728; <code>Stream.Builder</code> &#x8C03;&#x7528; <code>build()</code> &#x65B9;&#x6CD5;&#x540E;&#x7EE7;&#x7EED;&#x5C1D;&#x8BD5;&#x6DFB;&#x52A0;&#x5355;&#x8BCD;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x3002;</p>
<h3 id="arrays"><a name="arrays" class="anchor-navigation-ex-anchor" href="#arrays"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.6. Arrays</h3>
<p><code>Arrays</code> &#x7C7B;&#x4E2D;&#x542B;&#x6709;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>stream()</code> &#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x628A;&#x6570;&#x7EC4;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x5199; <code>interfaces/Machine.java</code> &#x4E2D;&#x7684;&#x4E3B;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6D41;&#xFF0C;&#x5E76;&#x5C06; <code>execute()</code> &#x5E94;&#x7528;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Machine2.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">Operations</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Machine2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Operations</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Bing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Crack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Twist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Pop&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">Operations</span><span class="token operator">::</span><span class="token function">execute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Bing
Crack
Twist
Pop
</code></pre><p><code>new Operations[]</code> &#x8868;&#x8FBE;&#x5F0F;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x4E86; <code>Operations</code> &#x5BF9;&#x8C61;&#x7684;&#x6570;&#x7EC4;&#x3002;</p>
<p><code>stream()</code> &#x540C;&#x6837;&#x53EF;&#x4EE5;&#x4EA7;&#x751F; <strong>IntStream</strong>&#xFF0C;<strong>LongStream</strong> &#x548C; <strong>DoubleStream</strong>&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/ArrayStreams.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">2.718</span><span class="token punctuation">,</span> <span class="token number">1.618</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%f &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">66</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5B50;&#x57DF;:</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">37</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>3.141590 2.718000 1.618000
1 3 5
11 22 44 66
7 15 28
</code></pre><p>&#x6700;&#x540E;&#x4E00;&#x6B21; <code>stream()</code> &#x7684;&#x8C03;&#x7528;&#x6709;&#x4E24;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x53C2;&#x6570;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x544A;&#x8BC9; <code>stream()</code> &#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x9009;&#x62E9;&#x5143;&#x7D20;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x544A;&#x77E5;&#x5728;&#x54EA;&#x91CC;&#x505C;&#x6B62;&#x3002;&#x6BCF;&#x79CD;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684; <code>stream()</code> &#x90FD;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<h3 id="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><a name="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.7. &#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h3>
<p>Java &#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5C06;&#x5728;<a href="18-Strings.html">&#x5B57;&#x7B26;&#x4E32;</a>&#x8FD9;&#x4E00;&#x7AE0;&#x8282;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x3002;Java 8 &#x5728; <code>java.util.regex.Pattern</code> &#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x65B9;&#x6CD5; <code>splitAsStream()</code>&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F20;&#x5165;&#x7684;&#x516C;&#x5F0F;&#x5C06;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x8F6C;&#x5316;&#x4E3A;&#x6D41;&#x3002;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x9650;&#x5236;&#xFF0C;&#x8F93;&#x5165;&#x53EA;&#x80FD;&#x662F; <strong>CharSequence</strong>&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x5C06;&#x6D41;&#x4F5C;&#x4E3A; <code>splitAsStream()</code> &#x7684;&#x53C2;&#x6570;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x518D;&#x4E00;&#x6B21;&#x67E5;&#x770B;&#x5C06;&#x6587;&#x4EF6;&#x5904;&#x7406;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x8FD9;&#x4E00;&#x6B21;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x6D41;&#x5C06;&#x6587;&#x4EF6;&#x5206;&#x5272;&#x4E3A;&#x5355;&#x72EC;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x63A5;&#x7740;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5C06;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x5316;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FileToWordsRegexp.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWordsRegexp</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> all<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">FileToWordsRegexp</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        all <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// First (comment) line</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Pattern</span>
        <span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;[ .,?]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splitAsStream</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWordsRegexp</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileToWordsRegexp</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Not much of a cheese shop really is it
</code></pre><p>&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x6211;&#x4EEC;&#x8BFB;&#x53D6;&#x4E86;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#xFF08;&#x8DF3;&#x8FC7;&#x7B2C;&#x4E00;&#x884C;&#x6CE8;&#x91CA;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x5355;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x5F53;&#x4F60;&#x8C03;&#x7528; <code>stream()</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x50CF;&#x5F80;&#x5E38;&#x4E00;&#x6837;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x6D41;&#xFF0C;&#x4F46;&#x8FD9;&#x6B21;&#x4F60;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x8C03;&#x7528; <code>stream()</code> &#x5728;&#x5DF2;&#x5B58;&#x50A8;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6D41;&#x3002;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x9650;&#x5236;&#xFF0C;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF1B;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x635F;&#x5931;&#x4E86;&#x6D41;&#x64CD;&#x4F5C;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4F18;&#x52BF;&#xFF1A;</p>
<ol>
<li>&#x6D41;&#x201C;&#x4E0D;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x201D;&#x3002;&#x5F53;&#x7136;&#x5B83;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x5185;&#x90E8;&#x5B58;&#x50A8;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x53EA;&#x662F;&#x5E8F;&#x5217;&#x7684;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#xFF0C;&#x548C;&#x6301;&#x6709;&#x6574;&#x4E2A;&#x5E8F;&#x5217;&#x5E76;&#x4E0D;&#x76F8;&#x540C;&#x3002;</li>
<li>&#x5B83;&#x4EEC;&#x662F;&#x61D2;&#x52A0;&#x8F7D;&#x8BA1;&#x7B97;&#x7684;&#x3002;</li>
</ol>
<p>&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x7A0D;&#x540E;&#x5C31;&#x4F1A;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<!-- Intermediate Operations -->
<h2 id="&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;"><a name="&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x4E2D;&#x95F4;&#x64CD;&#x4F5C;</h2>
<p>&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;&#x7528;&#x4E8E;&#x4ECE;&#x4E00;&#x4E2A;&#x6D41;&#x4E2D;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5C06;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x6D41;&#x4ECE;&#x540E;&#x7AEF;&#x8F93;&#x51FA;&#xFF0C;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x3002;</p>
<h3 id="&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;"><a name="&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;" class="anchor-navigation-ex-anchor" href="#&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. &#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;</h3>
<p><code>peek()</code> &#x64CD;&#x4F5C;&#x7684;&#x76EE;&#x7684;&#x662F;&#x5E2E;&#x52A9;&#x8C03;&#x8BD5;&#x3002;&#x5B83;&#x5141;&#x8BB8;&#x4F60;&#x65E0;&#x4FEE;&#x6539;&#x5730;&#x67E5;&#x770B;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Peeking.java</span>
<span class="token keyword">class</span> <span class="token class-name">Peeking</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toUpperCase</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Well WELL well it IT it s S s so SO so
</code></pre><p><code>FileToWords</code> &#x7A0D;&#x540E;&#x5B9A;&#x4E49;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x8C8C;&#x4F3C;&#x548C;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#xFF1A;&#x4EA7;&#x751F;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#x7684;&#x6D41;&#x3002;&#x4E4B;&#x540E;&#x5728;&#x5176;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x65F6;&#x8C03;&#x7528; <code>peek()</code> &#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
<p>&#x56E0;&#x4E3A; <code>peek()</code> &#x7B26;&#x5408;&#x65E0;&#x8FD4;&#x56DE;&#x503C;&#x7684; <strong>Consumer</strong> &#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x89C2;&#x5BDF;&#xFF0C;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x5143;&#x7D20;&#x6765;&#x66FF;&#x6362;&#x6D41;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<h3 id="&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;"><a name="&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;" class="anchor-navigation-ex-anchor" href="#&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. &#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;</h3>
<p>&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x719F;&#x8BC6;&#x4E86; <code>sorted()</code> &#x7684;&#x9ED8;&#x8BA4;&#x6BD4;&#x8F83;&#x5668;&#x5B9E;&#x73B0;&#x3002;&#x5176;&#x5B9E;&#x5B83;&#x8FD8;&#x6709;&#x53E6;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;&#x4F20;&#x5165;&#x4E00;&#x4E2A; <strong>Comparator</strong> &#x53C2;&#x6570;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/SortedComparator.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SortedComparator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">reverseOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>you what to the that sir leads in district And
</code></pre><p><code>sorted()</code> &#x9884;&#x8BBE;&#x4E86;&#x4E00;&#x4E9B;&#x9ED8;&#x8BA4;&#x7684;&#x6BD4;&#x8F83;&#x5668;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x53CD;&#x8F6C;&#x201C;&#x81EA;&#x7136;&#x6392;&#x5E8F;&#x201D;&#x3002;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x628A; Lambda &#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9; <code>sorted()</code>&#x3002;</p>
<h3 id="&#x79FB;&#x9664;&#x5143;&#x7D20;"><a name="&#x79FB;&#x9664;&#x5143;&#x7D20;" class="anchor-navigation-ex-anchor" href="#&#x79FB;&#x9664;&#x5143;&#x7D20;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. &#x79FB;&#x9664;&#x5143;&#x7D20;</h3>
<ul>
<li><p><code>distinct()</code>&#xFF1A;&#x5728; <code>Randoms.java</code> &#x7C7B;&#x4E2D;&#x7684; <code>distinct()</code> &#x53EF;&#x7528;&#x4E8E;&#x6D88;&#x9664;&#x6D41;&#x4E2D;&#x7684;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x3002;&#x76F8;&#x6BD4;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <strong>Set</strong> &#x96C6;&#x5408;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#x8981;&#x5C11;&#x5F97;&#x591A;&#x3002;</p>
</li>
<li><p><code>filter(Predicate)</code>&#xFF1A;&#x8FC7;&#x6EE4;&#x64CD;&#x4F5C;&#x4F1A;&#x4FDD;&#x7559;&#x4E0E;&#x4F20;&#x9012;&#x8FDB;&#x53BB;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x4E3A; <code>true</code> &#x5143;&#x7D20;&#x3002;</p>
</li>
</ul>
<p>&#x5728;&#x4E0B;&#x4F8B;&#x4E2D;&#xFF0C;<code>isPrime()</code> &#x4F5C;&#x4E3A;&#x8FC7;&#x6EE4;&#x5668;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x6D4B;&#x8D28;&#x6570;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Prime.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">LongStream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Prime</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">LongStream</span> <span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> i <span class="token operator">-&gt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Prime</span><span class="token operator">::</span><span class="token function">isPrime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Prime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Prime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>2 3 5 7 11 13 17 19 23 29
467 479 487 491 499 503 509 521 523 541
</code></pre><p><code>rangeClosed()</code> &#x5305;&#x542B;&#x4E86;&#x4E0A;&#x9650;&#x503C;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x6574;&#x9664;&#xFF0C;&#x5373;&#x4F59;&#x6570;&#x4E0D;&#x7B49;&#x4E8E; 0&#xFF0C;&#x5219; <code>noneMatch()</code> &#x64CD;&#x4F5C;&#x8FD4;&#x56DE; <code>true</code>&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4EFB;&#x4F55;&#x7B49;&#x4E8E; 0 &#x7684;&#x7ED3;&#x679C;&#x5219;&#x8FD4;&#x56DE; <code>false</code>&#x3002; <code>noneMatch()</code> &#x64CD;&#x4F5C;&#x4E00;&#x65E6;&#x6709;&#x5931;&#x8D25;&#x5C31;&#x4F1A;&#x9000;&#x51FA;&#x3002;</p>
<h3 id="&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;"><a name="&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;" class="anchor-navigation-ex-anchor" href="#&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.4. &#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;</h3>
<ul>
<li><p><code>map(Function)</code>&#xFF1A;&#x5C06;&#x51FD;&#x6570;&#x64CD;&#x4F5C;&#x5E94;&#x7528;&#x5728;&#x8F93;&#x5165;&#x6D41;&#x7684;&#x5143;&#x7D20;&#x4E2D;&#xFF0C;&#x5E76;&#x5C06;&#x8FD4;&#x56DE;&#x503C;&#x4F20;&#x9012;&#x5230;&#x8F93;&#x51FA;&#x6D41;&#x4E2D;&#x3002;</p>
</li>
<li><p><code>mapToInt(ToIntFunction)</code>&#xFF1A;&#x64CD;&#x4F5C;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x662F; <strong>IntStream</strong>&#x3002;</p>
</li>
<li><p><code>mapToLong(ToLongFunction)</code>&#xFF1A;&#x64CD;&#x4F5C;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x662F; <strong>LongStream</strong>&#x3002;</p>
</li>
<li><p><code>mapToDouble(ToDoubleFunction)</code>&#xFF1A;&#x64CD;&#x4F5C;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x662F; <strong>DoubleStream</strong>&#x3002;</p>
</li>
</ul>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>map()</code> &#x6620;&#x5C04;&#x591A;&#x79CD;&#x51FD;&#x6570;&#x5230;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6D41;&#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FunctionMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>
    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;add brackets&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> s<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
        s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>---( add brackets )---
[12]
[]
[23]
[45]
---( Increment )---
13
24
46
---( Replace )---
19
93
45
---( Take last digit )---
2
3
5
</code></pre><p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x81EA;&#x589E;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>Integer.parseInt()</code> &#x5C1D;&#x8BD5;&#x5C06;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x5316;&#x4E3A;&#x6574;&#x6570;&#x3002;&#x5982;&#x679C;&#x5B57;&#x7B26;&#x4E32;&#x4E0D;&#x80FD;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6574;&#x6570;&#x5C31;&#x4F1A;&#x629B;&#x51FA; <strong>NumberFormatException</strong> &#x5F02;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x987B;&#x56DE;&#x8FC7;&#x5934;&#x6765;&#x5C06;&#x539F;&#x59CB;&#x5B57;&#x7B26;&#x4E32;&#x653E;&#x56DE;&#x5230;&#x8F93;&#x51FA;&#x6D41;&#x4E2D;&#x3002;</p>
<p>&#x5728;&#x4EE5;&#x4E0A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>map()</code> &#x5C06;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6620;&#x5C04;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x548C;&#x63A5;&#x6536;&#x7C7B;&#x578B;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4ECE;&#x800C;&#x6539;&#x53D8;&#x6D41;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FunctionMap2.java</span>
<span class="token comment">// Different input and output types &#xFF08;&#x4E0D;&#x540C;&#x7684;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7C7B;&#x578B;&#xFF09;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Numbered</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token class-name">Numbered</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Numbered(&quot;</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Numbered</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Numbered(1)
Numbered(5)
Numbered(7)
Numbered(9)
Numbered(11)
Numbered(13)
</code></pre><p>&#x6211;&#x4EEC;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x6574;&#x6570;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x5668; <code>Numbered::new</code> &#x8F6C;&#x5316;&#x6210;&#x4E3A; <code>Numbered</code> &#x7C7B;&#x578B;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528; <strong>Function</strong> &#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x6570;&#x503C;&#x7C7B;&#x578B;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x5408;&#x9002;&#x7684; <code>mapTo&#x6570;&#x503C;&#x7C7B;&#x578B;</code> &#x8FDB;&#x884C;&#x66FF;&#x4EE3;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FunctionMap3.java</span>
<span class="token comment">// Producing numeric output streams&#xFF08; &#x4EA7;&#x751F;&#x6570;&#x503C;&#x8F93;&#x51FA;&#x6D41;&#xFF09;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;19&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToLong</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token operator">::</span><span class="token function">parseLong</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.9&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToDouble</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token operator">::</span><span class="token function">parseDouble</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%f &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>5 7 9
17 19 23
17.000000 1.900000 0.230000
</code></pre><p>&#x9057;&#x61BE;&#x7684;&#x662F;&#xFF0C;Java &#x8BBE;&#x8BA1;&#x8005;&#x5E76;&#x6CA1;&#x6709;&#x5C3D;&#x6700;&#x5927;&#x52AA;&#x529B;&#x53BB;&#x6D88;&#x9664;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x3002;</p>
<h3 id="&#x5728;-map-&#x4E2D;&#x7EC4;&#x5408;&#x6D41;"><a name="&#x5728;-map-&#x4E2D;&#x7EC4;&#x5408;&#x6D41;" class="anchor-navigation-ex-anchor" href="#&#x5728;-map-&#x4E2D;&#x7EC4;&#x5408;&#x6D41;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.5. &#x5728; map() &#x4E2D;&#x7EC4;&#x5408;&#x6D41;</h3>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x4F20;&#x5165;&#x7684;&#x5143;&#x7D20;&#x6D41;&#xFF0C;&#x5E76;&#x4E14;&#x6253;&#x7B97;&#x5BF9;&#x6D41;&#x5143;&#x7D20;&#x4F7F;&#x7528; <code>map()</code> &#x51FD;&#x6570;&#x3002;&#x73B0;&#x5728;&#x4F60;&#x5DF2;&#x7ECF;&#x627E;&#x5230;&#x4E86;&#x4E00;&#x4E9B;&#x53EF;&#x7231;&#x5E76;&#x72EC;&#x4E00;&#x65E0;&#x4E8C;&#x7684;&#x51FD;&#x6570;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF1A;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x529F;&#x80FD;&#x662F;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6D41;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x5374;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6D41;&#x7684;&#x6D41;&#x3002;</p>
<p><code>flatMap()</code> &#x505A;&#x4E86;&#x4E24;&#x4EF6;&#x4E8B;&#xFF1A;&#x5C06;&#x4EA7;&#x751F;&#x6D41;&#x7684;&#x51FD;&#x6570;&#x5E94;&#x7528;&#x5728;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x4E0A;&#xFF08;&#x4E0E; <code>map()</code> &#x6240;&#x505A;&#x7684;&#x76F8;&#x540C;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6BCF;&#x4E2A;&#x6D41;&#x90FD;&#x6241;&#x5E73;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#xFF0C;&#x56E0;&#x800C;&#x6700;&#x7EC8;&#x4EA7;&#x751F;&#x7684;&#x4EC5;&#x4EC5;&#x662F;&#x5143;&#x7D20;&#x3002;</p>
<p><code>flatMap(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F;&#x6D41;&#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>flatMapToInt(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F; <code>IntStream</code> &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>flatMapToLong(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F; <code>LongStream</code> &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>flatMapToDouble(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F; <code>DoubleStream</code> &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5F04;&#x6E05;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x4ECE;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x523B;&#x610F;&#x8BBE;&#x8BA1;&#x7684;&#x51FD;&#x6570;&#x7ED9;  <code>map()</code> &#x5F00;&#x59CB;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x5E76;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6D41;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/StreamOfStreams.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Gonzo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Kermit&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Beaker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e<span class="token operator">-&gt;</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>java.util.stream.ReferencePipeline$Head
java.util.stream.ReferencePipeline$Head
java.util.stream.ReferencePipeline$Head
</code></pre><p>&#x6211;&#x4EEC;&#x5929;&#x771F;&#x5730;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5F97;&#x5230;&#x5B57;&#x7B26;&#x4E32;&#x6D41;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x5F97;&#x5230;&#x7684;&#x5374;&#x662F;&#x201C;Head&#x201D;&#x6D41;&#x7684;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>flatMap()</code> &#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FlatMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlatMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Gonzo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fozzie&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Beaker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Gonzo
Fozzie
Beaker
Gonzo
Fozzie
Beaker
Gonzo
Fozzie
Beaker
</code></pre><p>&#x4ECE;&#x6620;&#x5C04;&#x8FD4;&#x56DE;&#x7684;&#x6BCF;&#x4E2A;&#x6D41;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x6241;&#x5E73;&#x4E3A;&#x7EC4;&#x6210;&#x5B83;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x6F14;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x4ECE;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6D41;&#x5F00;&#x59CB;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x6BCF;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x53BB;&#x521B;&#x5EFA;&#x66F4;&#x591A;&#x7684;&#x968F;&#x673A;&#x6570;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/StreamOfRandoms.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfRandoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">flatMapToInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>
        rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>58 -1 55 93 -1 61 61 29 -1 68 0 22 7 -1 88 28 51 89 9 -1
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5F15;&#x5165;&#x4E86; <code>concat()</code>&#xFF0C;&#x5B83;&#x4EE5;&#x53C2;&#x6570;&#x987A;&#x5E8F;&#x7EC4;&#x5408;&#x4E24;&#x4E2A;&#x6D41;&#x3002; &#x5982;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x6BCF;&#x4E2A;&#x968F;&#x673A; <code>Integer</code> &#x6D41;&#x7684;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; -1 &#x4F5C;&#x4E3A;&#x6807;&#x8BB0;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6700;&#x7EC8;&#x6D41;&#x786E;&#x5B9E;&#x662F;&#x4ECE;&#x4E00;&#x7EC4;&#x6241;&#x5E73;&#x6D41;&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#x3002;</p>
<p>&#x56E0;&#x4E3A; <code>rand.ints()</code> &#x4EA7;&#x751F;&#x7684;&#x662F;&#x4E00;&#x4E2A; <code>IntStream</code>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5FC5;&#x987B;&#x4F7F;&#x7528; <code>flatMap()</code>&#x3001;<code>concat()</code> &#x548C; <code>of()</code> &#x7684;&#x7279;&#x5B9A;&#x6574;&#x6570;&#x5F62;&#x5F0F;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x4E00;&#x4E0B;&#x5C06;&#x6587;&#x4EF6;&#x5212;&#x5206;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x6211;&#x4EEC;&#x6700;&#x540E;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x662F; <strong>FileToWordsRegexp.java</strong>&#xFF0C;&#x5B83;&#x7684;&#x95EE;&#x9898;&#x662F;&#x9700;&#x8981;&#x5C06;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x8BFB;&#x5165;&#x884C;&#x5217;&#x8868;&#x4E2D; &#x2014;&#x2014; &#x663E;&#x7136;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x8BE5;&#x5217;&#x8868;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x60F3;&#x8981;&#x7684;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E0D;&#x9700;&#x8981;&#x4E2D;&#x95F4;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x5355;&#x8BCD;&#x6D41;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x4F7F;&#x7528; <code>flatMap()</code> &#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FileToWords.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWords</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// First (comment) line</span>
        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splitAsStream</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>stream()</code> &#x73B0;&#x5728;&#x662F;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B8C;&#x6210;&#x6574;&#x4E2A;&#x6D41;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;<code>\\W+</code> &#x662F;&#x4E00;&#x4E2A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x4ED6;&#x8868;&#x793A;&#x201C;&#x975E;&#x5355;&#x8BCD;&#x5B57;&#x7B26;&#x201D;&#xFF0C;<code>+</code> &#x8868;&#x793A;&#x201C;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#x6216;&#x8005;&#x591A;&#x6B21;&#x201D;&#x3002;&#x5C0F;&#x5199;&#x5F62;&#x5F0F;&#x7684; <code>\\w</code> &#x8868;&#x793A;&#x201C;&#x5355;&#x8BCD;&#x5B57;&#x7B26;&#x201D;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x662F; <code>Pattern.compile().splitAsStream()</code> &#x4EA7;&#x751F;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x6D41;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5F53;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x60F3;&#x8981;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5355;&#x8BCD;&#x6D41;&#x65F6;&#xFF0C;&#x5728;&#x4F20;&#x5165;&#x7684;&#x884C;&#x6D41;&#xFF08;stream of lines&#xFF09;&#x4E0A;&#x8C03;&#x7528; <code>map()</code> &#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x6D41;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C;<code>flatMap()</code>  &#x53EF;&#x4EE5;&#x5C06;&#x5143;&#x7D20;&#x6D41;&#x7684;&#x6D41;&#x6241;&#x5E73;&#x5316;&#x4E3A;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5143;&#x7D20;&#x6D41;&#x3002;&#x6216;&#x8005;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>String.split()</code> &#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x5176;&#x53EF;&#x4EE5;&#x88AB; <code>Arrays.stream()</code> &#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6D41;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>&#x6709;&#x4E86;&#x771F;&#x6B63;&#x7684;&#x3001;&#x800C;&#x975E; <code>FileToWordsRegexp.java</code> &#x4E2D;&#x57FA;&#x4E8E;&#x96C6;&#x5408;&#x5B58;&#x50A8;&#x7684;&#x6D41;&#xFF0C;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x90FD;&#x5FC5;&#x987B;&#x4ECE;&#x5934;&#x521B;&#x5EFA;&#xFF0C;&#x56E0;&#x4E3A;&#x6D41;&#x5E76;&#x4E0D;&#x80FD;&#x88AB;&#x590D;&#x7528;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/FileToWordsTest.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWordsTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Not much of a cheese shop really
is it
</code></pre><p>&#x5728; <code>System.out.format()</code> &#x4E2D;&#x7684; <code>%s</code> &#x8868;&#x660E;&#x53C2;&#x6570;&#x4E3A; <strong>String</strong> &#x7C7B;&#x578B;&#x3002;</p>
<!-- Optional -->
<h2 id="optional&#x7C7B;"><a name="optional&#x7C7B;" class="anchor-navigation-ex-anchor" href="#optional&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Optional&#x7C7B;</h2>
<p>&#x5728;&#x6211;&#x4EEC;&#x5B66;&#x4E60;&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x8003;&#x8651;&#x5982;&#x679C;&#x4F60;&#x5728;&#x4E00;&#x4E2A;&#x7A7A;&#x6D41;&#x4E2D;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x3002;&#x6211;&#x4EEC;&#x559C;&#x6B22;&#x4E3A;&#x4E86;&#x201C;happy path&#x201D;&#x800C;&#x5C06;&#x6D41;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x5E76;&#x5047;&#x8BBE;&#x6D41;&#x4E0D;&#x4F1A;&#x88AB;&#x4E2D;&#x65AD;&#x3002;&#x5728;&#x6D41;&#x4E2D;&#x653E;&#x7F6E; <code>null</code> &#x662F;&#x5F88;&#x597D;&#x7684;&#x4E2D;&#x65AD;&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x662F;&#x5426;&#x6709;&#x67D0;&#x79CD;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4F5C;&#x4E3A;&#x6D41;&#x5143;&#x7D20;&#x7684;&#x6301;&#x6709;&#x8005;&#xFF0C;&#x5373;&#x4F7F;&#x67E5;&#x770B;&#x7684;&#x5143;&#x7D20;&#x4E0D;&#x5B58;&#x5728;&#x4E5F;&#x80FD;&#x53CB;&#x597D;&#x5730;&#x63D0;&#x793A;&#x6211;&#x4EEC;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#xFF09;&#xFF1F;</p>
<p><strong>Optional</strong> &#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8FD9;&#x6837;&#x7684;&#x529F;&#x80FD;&#x3002;&#x4E00;&#x4E9B;&#x6807;&#x51C6;&#x6D41;&#x64CD;&#x4F5C;&#x8FD4;&#x56DE; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x9884;&#x671F;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x5B58;&#x5728;&#x3002;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><code>findFirst()</code> &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x5219;&#x8FD4;&#x56DE; <strong>Optional.empty</strong></li>
<li><code>findAny()</code> &#x8FD4;&#x56DE;&#x5305;&#x542B;&#x4EFB;&#x610F;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x5219;&#x8FD4;&#x56DE; <strong>Optional.empty</strong></li>
<li><p><code>max()</code> &#x548C; <code>min()</code> &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x6700;&#x5927;&#x503C;&#x6216;&#x8005;&#x6700;&#x5C0F;&#x503C;&#x7684; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x5219;&#x8FD4;&#x56DE; <strong>Optional.empty</strong></p>
<p><code>reduce()</code> &#x4E0D;&#x518D;&#x4EE5; <code>identity</code> &#x5F62;&#x5F0F;&#x5F00;&#x5934;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;&#xFF08;<code>identity</code> &#x5BF9;&#x8C61;&#x6210;&#x4E3A;&#x5176;&#x4ED6;&#x5F62;&#x5F0F;&#x7684; <code>reduce()</code> &#x7684;&#x9ED8;&#x8BA4;&#x7ED3;&#x679C;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5B58;&#x5728;&#x7A7A;&#x7ED3;&#x679C;&#x7684;&#x98CE;&#x9669;&#xFF09;</p>
</li>
</ul>
<p>&#x5BF9;&#x4E8E;&#x6570;&#x5B57;&#x6D41; <strong>IntStream</strong>&#x3001;<strong>LongStream</strong> &#x548C; <strong>DoubleStream</strong>&#xFF0C;<code>average()</code> &#x4F1A;&#x5C06;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4EE5;&#x9632;&#x6B62;&#x6D41;&#x4E3A;&#x7A7A;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5BF9;&#x7A7A;&#x6D41;&#x8FDB;&#x884C;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x7684;&#x7B80;&#x5355;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/OptionalsFromEmptyStreams.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalsFromEmptyStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> s1 <span class="token operator">+</span> s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
OptionalDouble.empty
</code></pre><p>&#x5F53;&#x6D41;&#x4E3A;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x4F60;&#x4F1A;&#x83B7;&#x5F97;&#x4E00;&#x4E2A; <strong>Optional.empty</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;<strong>Optional</strong> &#x62E5;&#x6709; <code>toString()</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5C55;&#x793A;&#x6709;&#x7528;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x7A7A;&#x6D41;&#x662F;&#x901A;&#x8FC7; <code>Stream.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String</span><span class="token punctuation">&gt;</span></span>empty()</code> &#x521B;&#x5EFA;&#x7684;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4E0A;&#x4E0B;&#x6587;&#x73AF;&#x5883;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8C03;&#x7528; <code>Stream.empty()</code>&#xFF0C;Java &#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1B;&#x8FD9;&#x4E2A;&#x8BED;&#x6CD5;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5982;&#x679C;&#x7F16;&#x8BD1;&#x5668;&#x62E5;&#x6709;&#x4E86;&#x8DB3;&#x591F;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x8C03;&#x7528; <code>empty()</code> &#x65F6;&#x63A8;&#x65AD;&#x7C7B;&#x578B;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x5C55;&#x793A;&#x4E86; <strong>Optional</strong> &#x7684;&#x4E24;&#x4E2A;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/OptionalBasics.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalBasics</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing inside!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Epithets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Epithets
Nothing inside!
</code></pre><p>&#x5F53;&#x4F60;&#x63A5;&#x6536;&#x5230; <strong>Optional</strong> &#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5E94;&#x9996;&#x5148;&#x8C03;&#x7528; <code>isPresent()</code> &#x68C0;&#x67E5;&#x5176;&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;&#x5143;&#x7D20;&#x3002;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; <code>get()</code> &#x83B7;&#x53D6;&#x3002;</p>
<!-- Convenience Functions -->
<h3 id="&#x4FBF;&#x5229;&#x51FD;&#x6570;"><a name="&#x4FBF;&#x5229;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x4FBF;&#x5229;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. &#x4FBF;&#x5229;&#x51FD;&#x6570;</h3>
<p>&#x6709;&#x8BB8;&#x591A;&#x4FBF;&#x5229;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x89E3;&#x5305; <strong>Optional</strong> &#xFF0C;&#x8FD9;&#x7B80;&#x5316;&#x4E86;&#x4E0A;&#x8FF0;&#x201C;&#x5BF9;&#x6240;&#x5305;&#x542B;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x68C0;&#x67E5;&#x548C;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x201D;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<ul>
<li><code>ifPresent(Consumer)</code>&#xFF1A;&#x5F53;&#x503C;&#x5B58;&#x5728;&#x65F6;&#x8C03;&#x7528; <strong>Consumer</strong>&#xFF0C;&#x5426;&#x5219;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x505A;&#x3002;</li>
<li><code>orElse(otherObject)</code>&#xFF1A;&#x5982;&#x679C;&#x503C;&#x5B58;&#x5728;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x751F;&#x6210; <strong>otherObject</strong>&#x3002;</li>
<li><code>orElseGet(Supplier)</code>&#xFF1A;&#x5982;&#x679C;&#x503C;&#x5B58;&#x5728;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <strong>Supplier</strong> &#x51FD;&#x6570;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x53EF;&#x66FF;&#x4EE3;&#x5BF9;&#x8C61;&#x3002;</li>
<li><code>orElseThrow(Supplier)</code>&#xFF1A;&#x5982;&#x679C;&#x503C;&#x5B58;&#x5728;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <strong>Supplier</strong> &#x51FD;&#x6570;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x3002;</li>
</ul>
<p>&#x5982;&#x4E0B;&#x662F;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x4FBF;&#x5229;&#x51FD;&#x6570;&#x7684;&#x7B80;&#x5355;&#x6F14;&#x793A;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Optionals.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Optionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">basics</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing inside!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        optString<span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElse</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Nada&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        optString<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Generated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Supplied&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Caught &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> testName<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> cos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; === &quot;</span> <span class="token operator">+</span> testName <span class="token operator">+</span> <span class="token string">&quot; === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cos<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Epithets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cos<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;basics&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">basics</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ifPresent&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">ifPresent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElse&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">orElse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElseGet&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">orElseGet</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElseThrow&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">orElseThrow</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>=== basics ===
Epithets
Nothing inside!
=== ifPresent ===
Epithets
=== orElse ===
Epithets
Nada
=== orElseGet ===
Epithets
Generated
=== orElseThrow ===
Epithets
Caught java.lang.Exception: Supplied
</code></pre><p><code>test()</code> &#x901A;&#x8FC7;&#x4F20;&#x5165;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x9002;&#x7528;&#x7684; <strong>Consumer</strong> &#x6765;&#x907F;&#x514D;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x3002;</p>
<p><code>orElseThrow()</code> &#x901A;&#x8FC7; <strong>catch</strong> &#x5173;&#x952E;&#x5B57;&#x6765;&#x6355;&#x83B7;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#x3002;&#x66F4;&#x591A;&#x7EC6;&#x8282;&#xFF0C;&#x5C06;&#x5728; <a href="15-Exceptions.html">&#x5F02;&#x5E38;</a> &#x8FD9;&#x4E00;&#x7AE0;&#x8282;&#x4E2D;&#x5B66;&#x4E60;&#x3002;</p>
<!-- Creating Optionals -->
<h3 id="&#x521B;&#x5EFA;-optional"><a name="&#x521B;&#x5EFA;-optional" class="anchor-navigation-ex-anchor" href="#&#x521B;&#x5EFA;-optional"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. &#x521B;&#x5EFA; Optional</h3>
<p>&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x52A0;&#x5165; <strong>Optional</strong> &#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762; 3 &#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li><code>empty()</code>&#xFF1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x7A7A; <strong>Optional</strong>&#x3002;</li>
<li><code>of(value)</code>&#xFF1A;&#x5C06;&#x4E00;&#x4E2A;&#x975E;&#x7A7A;&#x503C;&#x5305;&#x88C5;&#x5230; <strong>Optional</strong> &#x91CC;&#x3002;</li>
<li><code>ofNullable(value)</code>&#xFF1A;&#x9488;&#x5BF9;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x4E3A;&#x7A7A;&#x7684;&#x503C;&#xFF0C;&#x4E3A;&#x7A7A;&#x65F6;&#x81EA;&#x52A8;&#x751F;&#x6210; <strong>Optional.empty</strong>&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x503C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x6765;&#x770B;&#x770B;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/CreatingOptionals.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">CreatingOptionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> testName<span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> opt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; === &quot;</span> <span class="token operator">+</span> testName <span class="token operator">+</span> <span class="token string">&quot; === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;empty&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;of&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Howdy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;of&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ofNullable&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token string">&quot;Hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ofNullable&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>=== empty ===
Null
=== of ===
Howdy
java.lang.NullPointerException
=== ofNullable ===
Hi
=== ofNullable ===
Null
</code></pre><p>&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x4F20;&#x9012; <code>null</code> &#x5230; <code>of()</code> &#x6765;&#x521B;&#x5EFA; <code>Optional</code> &#x5BF9;&#x8C61;&#x3002;&#x6700;&#x5B89;&#x5168;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#xFF0C; &#x4F7F;&#x7528; <code>ofNullable()</code> &#x6765;&#x4F18;&#x96C5;&#x5730;&#x5904;&#x7406; <code>null</code>&#x3002;</p>
<h3 id="optional-&#x5BF9;&#x8C61;&#x64CD;&#x4F5C;"><a name="optional-&#x5BF9;&#x8C61;&#x64CD;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#optional-&#x5BF9;&#x8C61;&#x64CD;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.3. Optional &#x5BF9;&#x8C61;&#x64CD;&#x4F5C;</h3>
<p>&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x6D41;&#x7BA1;&#x9053;&#x751F;&#x6210;&#x4E86; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x4E0B;&#x9762; 3 &#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4F7F;&#x5F97; <strong>Optional</strong> &#x7684;&#x540E;&#x7EED;&#x80FD;&#x505A;&#x66F4;&#x591A;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>
<ul>
<li><p><code>filter(Predicate)</code>&#xFF1A;&#x5C06; <strong>Predicate</strong> &#x5E94;&#x7528;&#x4E8E; <strong>Optional</strong> &#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x5F53; <strong>Optional</strong> &#x4E0D;&#x6EE1;&#x8DB3; <strong>Predicate</strong> &#x65F6;&#x8FD4;&#x56DE;&#x7A7A;&#x3002;&#x5982;&#x679C; <strong>Optional</strong> &#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x3002;</p>
</li>
<li><p><code>map(Function)</code>&#xFF1A;&#x5982;&#x679C; <strong>Optional</strong> &#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E94;&#x7528; <strong>Function</strong>  &#x4E8E; <strong>Optional</strong> &#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x5426;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE; <strong>Optional.empty</strong>&#x3002;</p>
</li>
<li><p><code>flatMap(Function)</code>&#xFF1A;&#x540C; <code>map()</code>&#xFF0C;&#x4F46;&#x662F;&#x63D0;&#x4F9B;&#x7684;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x5C06;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64; <code>flatMap()</code> &#x4E0D;&#x4F1A;&#x5728;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5305;&#x88C5;&#x3002;</p>
</li>
</ul>
<p>&#x4EE5;&#x4E0A;&#x65B9;&#x6CD5;&#x90FD;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x6570;&#x503C;&#x578B; <strong>Optional</strong>&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x6D41;&#x7684; <code>filter()</code> &#x4F1A;&#x5728; <strong>Predicate</strong> &#x8FD4;&#x56DE; <code>false</code> &#x65F6;&#x79FB;&#x9664;&#x6D41;&#x5143;&#x7D20;&#x3002;&#x800C; <code>Optional.filter()</code> &#x5728;&#x5931;&#x8D25;&#x65F6;&#x4E0D;&#x4F1A;&#x5220;&#x9664; <strong>Optional</strong>&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x5176;&#x4FDD;&#x7559;&#x4E0B;&#x6765;&#xFF0C;&#x5E76;&#x8F6C;&#x5316;&#x4E3A;&#x7A7A;&#x3002;&#x4E0B;&#x9762;&#x8BF7;&#x770B;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/OptionalFilter.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bingo&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pred<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;str != \&quot;\&quot;&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> str <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;str.length() == 3&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;startsWith(\&quot;B\&quot;)&quot;</span><span class="token punctuation">,</span>
                str <span class="token operator">-&gt;</span> str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>---( true )---
Optional[Foo]
Optional[]
Optional[Bar]
Optional[Baz]
Optional[Bingo]
Optional.empty
---( false )---
Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
---( str != &quot;&quot; )---
Optional[Foo]
Optional.empty
Optional[Bar]
Optional[Baz]
Optional[Bingo]
Optional.empty
---( str.length() == 3 )---
Optional[Foo]
Optional.empty
Optional[Bar]
Optional[Baz]
Optional.empty
Optional.empty
---( startsWith(&quot;B&quot;) )---
Optional.empty
Optional.empty
Optional[Bar]
Optional[Baz]
Optional[Bingo]
Optional.empty
</code></pre><p>&#x5373;&#x4F7F;&#x8F93;&#x51FA;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x6D41;&#xFF0C;&#x7279;&#x522B;&#x662F; <code>test()</code> &#x4E2D;&#x7684; for &#x5FAA;&#x73AF;&#x3002;&#x6BCF;&#x4E00;&#x6B21;&#x7684; for &#x5FAA;&#x73AF;&#x65F6;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x6D41;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E; for &#x5FAA;&#x73AF;&#x7684;&#x7D22;&#x5F15;&#x8DF3;&#x8FC7;&#x6307;&#x5B9A;&#x4E2A;&#x6570;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5B83;&#x6700;&#x7EC8;&#x5728;&#x6D41;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8FDE;&#x7EED;&#x5143;&#x7D20;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x8C03;&#x7528; <code>findFirst()</code> &#x83B7;&#x53D6;&#x5269;&#x4F59;&#x5143;&#x7D20;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x7ED3;&#x679C;&#x4F1A;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x4E0D;&#x540C;&#x4E8E;&#x666E;&#x901A; for &#x5FAA;&#x73AF;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x7D22;&#x5F15;&#x503C;&#x8303;&#x56F4;&#x5E76;&#x4E0D;&#x662F; <code>i &lt; elements.length</code>&#xFF0C; &#x800C;&#x662F; <code>i &lt;= elements.length</code>&#x3002;&#x6240;&#x4EE5;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5B9E;&#x9645;&#x4E0A;&#x8D85;&#x51FA;&#x4E86;&#x6D41;&#x3002;&#x65B9;&#x4FBF;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x5C06;&#x81EA;&#x52A8;&#x6210;&#x4E3A; <strong>Optional.empty</strong>&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7684;&#x7ED3;&#x5C3E;&#x4E2D;&#x770B;&#x5230;&#x3002;</p>
<p>&#x540C; <code>map()</code> &#x4E00;&#x6837; &#xFF0C; <code>Optional.map()</code> &#x5E94;&#x7528;&#x4E8E;&#x51FD;&#x6570;&#x3002;&#x5B83;&#x4EC5;&#x5728; <strong>Optional</strong> &#x4E0D;&#x4E3A;&#x7A7A;&#x65F6;&#x624D;&#x5E94;&#x7528;&#x6620;&#x5C04;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x5C06; <strong>Optional</strong> &#x7684;&#x5185;&#x5BB9;&#x63D0;&#x53D6;&#x5230;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/OptionalMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Function</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OptionalMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Produces an Optional</span>
                            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If Optional is not empty, map() first extracts</span>
        <span class="token comment">// the contents which it then passes</span>
        <span class="token comment">// to the function:</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Add brackets&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> s<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
                s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// After the function is finished, map() wraps the</span>
    <span class="token comment">// result in an Optional before returning it:</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>---( Add brackets )---
Optional[[12]]
Optional[[]]
Optional[[23]]
Optional[[45]]
Optional.empty
---( Increment )---
Optional[13]
Optional[]
Optional[24]
Optional[46]
Optional.empty
---( Replace )---
Optional[19]
Optional[]
Optional[93]
Optional[45]
Optional.empty
---( Take last digit )---
Optional[2]
Optional[]
Optional[3]
Optional[5]
Optional.empty
</code></pre><p>&#x6620;&#x5C04;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4F1A;&#x81EA;&#x52A8;&#x5305;&#x88C5;&#x6210;&#x4E3A; <strong>Optional</strong>&#x3002;<strong>Optional.empty</strong> &#x4F1A;&#x88AB;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x3002;</p>
<p><strong>Optional</strong> &#x7684; <code>flatMap()</code> &#x5E94;&#x7528;&#x4E8E;&#x5DF2;&#x751F;&#x6210; <strong>Optional</strong> &#x7684;&#x6620;&#x5C04;&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5; <code>flatMap()</code> &#x4E0D;&#x4F1A;&#x50CF; <code>map()</code> &#x90A3;&#x6837;&#x5C06;&#x7ED3;&#x679C;&#x5C01;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/OptionalFlatMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Optional</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Function</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OptionalFlatMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span>
                     <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Add brackets&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
                        <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
                        s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span>
                        <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>---( Add brackets )---
Optional[[12]]
Optional[[]]
Optional[[23]]
Optional[[45]]
Optional.empty
 ---( Increment )---
Optional[13]
Optional[]
Optional[24]
Optional[46]
Optional.empty
 ---( Replace )---
Optional[19]
Optional[]
Optional[93]
Optional[45]
Optional.empty
 ---( Take last digit )---
Optional[2]
Optional[]
Optional[3]
Optional[5]
Optional.empty
</code></pre><p>&#x540C; <code>map()</code>&#xFF0C;<code>flatMap()</code> &#x5C06;&#x63D0;&#x53D6;&#x975E;&#x7A7A; <strong>Optional</strong> &#x7684;&#x5185;&#x5BB9;&#x5E76;&#x5C06;&#x5176;&#x5E94;&#x7528;&#x5728;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x3002;&#x552F;&#x4E00;&#x7684;&#x533A;&#x522B;&#x5C31;&#x662F; <code>flatMap()</code> &#x4E0D;&#x4F1A;&#x628A;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x5DF2;&#x7ECF;&#x88AB;&#x5305;&#x88C5;&#x8FC7;&#x4E86;&#x3002;&#x5728;&#x5982;&#x4E0A;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x4E2D;&#x663E;&#x5F0F;&#x5730;&#x5B8C;&#x6210;&#x4E86;&#x5305;&#x88C5;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x663E;&#x7136; <code>Optional.flatMap()</code> &#x662F;&#x4E3A;&#x90A3;&#x4E9B;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x751F;&#x6210; <strong>Optional</strong> &#x7684;&#x51FD;&#x6570;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x3002;</p>
<!-- Streams of Optionals -->
<h3 id="optional-&#x6D41;"><a name="optional-&#x6D41;" class="anchor-navigation-ex-anchor" href="#optional-&#x6D41;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.4. Optional &#x6D41;</h3>
<p>&#x5047;&#x8BBE;&#x4F60;&#x7684;&#x751F;&#x6210;&#x5668;&#x53EF;&#x80FD;&#x4EA7;&#x751F; <code>null</code> &#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x7528;&#x5B83;&#x6765;&#x521B;&#x5EFA;&#x6D41;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x81EA;&#x7136;&#x5730;&#x60F3;&#x5230;&#x7528;  <strong>Optional</strong> &#x6765;&#x5305;&#x88C5;&#x5143;&#x7D20;&#x3002;&#x5982;&#x4E0B;&#x662F;&#x5B83;&#x7684;&#x6837;&#x5B50;&#xFF0C;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Signal.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Signal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> msg<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Signal(&quot;</span> <span class="token operator">+</span> msg <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Signal</span> <span class="token function">morse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token string">&quot;dot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token string">&quot;dash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">Signal</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Signal</span><span class="token operator">::</span><span class="token function">morse</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>signal <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x6D41;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5F04;&#x6E05;&#x695A;&#x5982;&#x4F55;&#x89E3;&#x5305; <strong>Optional</strong>&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/StreamOfOptionals.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfOptionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Signal</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Signal</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">::</span><span class="token function">isPresent</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">.</span>empty
<span class="token class-name">Optional</span><span class="token punctuation">.</span>empty
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">.</span>empty
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span>
</code></pre>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>filter()</code> &#x6765;&#x4FDD;&#x7559;&#x90A3;&#x4E9B;&#x975E;&#x7A7A; <strong>Optional</strong>&#xFF0C;&#x7136;&#x540E;&#x5728; <code>map()</code> &#x4E2D;&#x4F7F;&#x7528; <code>get()</code> &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x3002;&#x7531;&#x4E8E;&#x6BCF;&#x79CD;&#x60C5;&#x51B5;&#x90FD;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x201C;&#x7A7A;&#x503C;&#x201D;&#x7684;&#x542B;&#x4E49;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x8981;&#x4E3A;&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<!-- Terminal Operations -->
<h2 id="&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;"><a name="&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. &#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;</h2>
<p>&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x83B7;&#x53D6;&#x6D41;&#x7684;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x3002;&#x81F3;&#x6B64;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x518D;&#x7EE7;&#x7EED;&#x5F80;&#x540E;&#x4F20;&#x9012;&#x6D41;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;&#xFF0C;&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;&#x603B;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x6D41;&#x7BA1;&#x9053;&#x4E2D;&#x6240;&#x505A;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4EF6;&#x4E8B;&#x3002;</p>
<!-- Convert to an Array -->
<h3 id="&#x6570;&#x7EC4;"><a name="&#x6570;&#x7EC4;" class="anchor-navigation-ex-anchor" href="#&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.1. &#x6570;&#x7EC4;</h3>
<ul>
<li><code>toArray()</code>&#xFF1A;&#x5C06;&#x6D41;&#x8F6C;&#x6362;&#x6210;&#x9002;&#x5F53;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;&#x3002;</li>
<li><code>toArray(generator)</code>&#xFF1A;&#x5728;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x751F;&#x6210;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;&#x3002;</li>
</ul>
<p>&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5F97;&#x5230;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x4EE5;&#x4FBF;&#x4E8E;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x5F88;&#x6709;&#x7528;&#x3002;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x590D;&#x7528;&#x6D41;&#x4EA7;&#x751F;&#x7684;&#x968F;&#x673A;&#x6570;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x4F7F;&#x7528;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;:</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/RandInts.java</span>
<span class="token keyword">package</span> <span class="token namespace">streams</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandInts</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IntStream</span> <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>rints<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x4E0A;&#x4F8B;&#x5C06;100&#x4E2A;&#x6570;&#x503C;&#x8303;&#x56F4;&#x5728; 0 &#x5230; 1000 &#x4E4B;&#x95F4;&#x7684;&#x968F;&#x673A;&#x6570;&#x6D41;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x6570;&#x7EC4;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5728; <code>rints</code> &#x4E2D;&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528; <code>rands()</code> &#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x83B7;&#x53D6;&#x76F8;&#x540C;&#x7684;&#x6574;&#x6570;&#x6D41;&#x3002;</p>
<!-- Apply a Final Operation to Every Element -->
<h3 id="&#x5FAA;&#x73AF;"><a name="&#x5FAA;&#x73AF;" class="anchor-navigation-ex-anchor" href="#&#x5FAA;&#x73AF;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.2. &#x5FAA;&#x73AF;</h3>
<ul>
<li><code>forEach(Consumer)</code>&#x5E38;&#x89C1;&#x5982; <code>System.out::println</code> &#x4F5C;&#x4E3A; <strong>Consumer</strong> &#x51FD;&#x6570;&#x3002;</li>
<li><code>forEachOrdered(Consumer)</code>&#xFF1A; &#x4FDD;&#x8BC1; <code>forEach</code> &#x6309;&#x7167;&#x539F;&#x59CB;&#x6D41;&#x987A;&#x5E8F;&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#xFF1A;&#x65E0;&#x5E8F;&#x64CD;&#x4F5C;&#xFF0C;&#x4EC5;&#x5728;&#x5F15;&#x5165;&#x5E76;&#x884C;&#x6D41;&#x65F6;&#x624D;&#x6709;&#x610F;&#x4E49;&#x3002;&#x5728; <a href="24-Concurrent-Programming.html">&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a> &#x7AE0;&#x8282;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E0B; <code>parallel()</code>&#xFF1A;&#x53EF;&#x5B9E;&#x73B0;&#x591A;&#x5904;&#x7406;&#x5668;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x4E3A;&#x5C06;&#x6D41;&#x5206;&#x5272;&#x4E3A;&#x591A;&#x4E2A;&#xFF08;&#x901A;&#x5E38;&#x6570;&#x76EE;&#x4E3A; CPU &#x6838;&#x5FC3;&#x6570;&#xFF09;&#x5E76;&#x5728;&#x4E0D;&#x540C;&#x5904;&#x7406;&#x5668;&#x4E0A;&#x5206;&#x522B;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x7684;&#x662F;&#x5185;&#x90E8;&#x8FED;&#x4EE3;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5916;&#x90E8;&#x8FED;&#x4EE3;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x662F;&#x53EF;&#x80FD;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p><code>parallel()</code> &#x770B;&#x4F3C;&#x7B80;&#x5355;&#xFF0C;&#x5B9E;&#x5219;&#x68D8;&#x624B;&#x3002;&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x5C06;&#x5728;&#x7A0D;&#x540E;&#x7684; <a href="24-Concurrent-Programming.html">&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a> &#x7AE0;&#x8282;&#x4E2D;&#x5B66;&#x4E60;&#x3002;</p>
<p>&#x4E0B;&#x4F8B;&#x5F15;&#x5165; <code>parallel()</code> &#x6765;&#x5E2E;&#x52A9;&#x7406;&#x89E3; <code>forEachOrdered(Consumer)</code> &#x7684;&#x4F5C;&#x7528;&#x548C;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/ForEach.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForEach</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SZ <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>SZ<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>SZ<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>SZ<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEachOrdered</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>258 555 693 861 961 429 868 200 522 207 288 128 551 589
551 861 429 589 200 522 555 693 258 128 868 288 961 207
258 555 693 861 961 429 868 200 522 207 288 128 551 589
</code></pre><p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6D4B;&#x8BD5;&#x4E0D;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x6211;&#x4EEC;&#x62BD;&#x79BB;&#x51FA;&#x4E86; <code>SZ</code> &#x53D8;&#x91CF;&#x3002;&#x7ED3;&#x679C;&#x5F88;&#x6709;&#x8DA3;&#xFF1A;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x6D41;&#x4E2D;&#xFF0C;&#x672A;&#x4F7F;&#x7528; <code>parallel()</code> &#xFF0C;&#x6240;&#x4EE5; <code>rands()</code> &#x6309;&#x7167;&#x5143;&#x7D20;&#x8FED;&#x4EE3;&#x51FA;&#x73B0;&#x7684;&#x987A;&#x5E8F;&#x663E;&#x793A;&#x7ED3;&#x679C;&#xFF1B;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x6D41;&#x4E2D;&#xFF0C;&#x5F15;&#x5165;<code>parallel()</code> &#xFF0C;&#x5373;&#x4FBF;&#x6D41;&#x5F88;&#x5C0F;&#xFF0C;&#x8F93;&#x51FA;&#x7684;&#x7ED3;&#x679C;&#x987A;&#x5E8F;&#x4E5F;&#x548C;&#x524D;&#x9762;&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x591A;&#x5904;&#x7406;&#x5668;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x7684;&#x539F;&#x56E0;&#x3002;&#x591A;&#x6B21;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#xFF0C;&#x7ED3;&#x679C;&#x5747;&#x4E0D;&#x540C;&#x3002;&#x591A;&#x5904;&#x7406;&#x5668;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x5E26;&#x6765;&#x7684;&#x975E;&#x786E;&#x5B9A;&#x6027;&#x56E0;&#x7D20;&#x9020;&#x6210;&#x4E86;&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x5728;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6D41;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E86; <code>parallel()</code> &#x548C; <code>forEachOrdered()</code> &#x6765;&#x5F3A;&#x5236;&#x4FDD;&#x6301;&#x539F;&#x59CB;&#x6D41;&#x987A;&#x5E8F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x975E;&#x5E76;&#x884C;&#x6D41;&#x4F7F;&#x7528; <code>forEachOrdered()</code> &#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;&#x7684;&#x3002;</p>
<!-- Collecting -->
<h3 id="&#x96C6;&#x5408;"><a name="&#x96C6;&#x5408;" class="anchor-navigation-ex-anchor" href="#&#x96C6;&#x5408;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.3. &#x96C6;&#x5408;</h3>
<ul>
<li><code>collect(Collector)</code>&#xFF1A;&#x4F7F;&#x7528; <strong>Collector</strong> &#x6536;&#x96C6;&#x6D41;&#x5143;&#x7D20;&#x5230;&#x7ED3;&#x679C;&#x96C6;&#x5408;&#x4E2D;&#x3002;</li>
<li><code>collect(Supplier, BiConsumer, BiConsumer)</code>&#xFF1A;&#x540C;&#x4E0A;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570; <strong>Supplier</strong> &#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7ED3;&#x679C;&#x96C6;&#x5408;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570; <strong>BiConsumer</strong> &#x5C06;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5305;&#x542B;&#x5230;&#x7ED3;&#x679C;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570; <strong>BiConsumer</strong> &#x7528;&#x4E8E;&#x5C06;&#x4E24;&#x4E2A;&#x503C;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x3002;</li>
</ul>
<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E86;&#x51E0;&#x4E2A; <strong>Collectors</strong> &#x7684;&#x8FD0;&#x7528;&#x793A;&#x4F8B;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5B83;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x64CD;&#x4F5C;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x67E5;&#x770B; <code>java.util.stream.Collectors</code> &#x7684; API &#x6587;&#x6863;&#x4E86;&#x89E3;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5143;&#x7D20;&#x6536;&#x96C6;&#x5230;&#x4EFB;&#x610F;&#x4E00;&#x79CD;&#x7279;&#x5B9A;&#x7684;&#x96C6;&#x5408;&#x4E2D;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5143;&#x7D20;&#x6709;&#x5E8F;&#xFF0C;&#x5C06;&#x5143;&#x7D20;&#x5B58;&#x50A8;&#x5728; <strong>TreeSet</strong> &#x4E2D;&#x3002;<strong>Collectors</strong> &#x91CC;&#x9762;&#x6CA1;&#x6709;&#x7279;&#x5B9A;&#x7684; <code>toTreeSet()</code>&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5F15;&#x7528;&#x4F20;&#x9012;&#x7ED9; <code>Collectors.toCollection()</code>&#xFF0C;&#x4ECE;&#x800C;&#x6784;&#x5EFA;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x96C6;&#x5408;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x5C06;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5355;&#x8BCD;&#x6536;&#x96C6;&#x5230; <strong>TreeSet</strong> &#x96C6;&#x5408;&#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/TreeSetOfWords.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSetOfWords</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words2 <span class="token operator">=</span>
                <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;TreeSetOfWords.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;\\d+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// No numbers</span>
                        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">trim</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">TreeSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>words2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>[Arrays, Collectors, Exception, Files, Output, Paths,
Set, String, System, TreeSet, TreeSetOfWords, args,
class, collect, file, filter, flatMap, get, import,
java, length, limit, lines, main, map, matches, new,
nio, numbers, out, println, public, split, static,
stream, streams, throws, toCollection, trim, util,
void, words2]
</code></pre><p><strong>Files.</strong><code>lines()</code> &#x6253;&#x5F00; <strong>Path</strong> &#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x884C;&#x6D41;&#x3002;&#x4E0B;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x5C06;&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x975E;&#x5355;&#x8BCD;&#x5B57;&#x7B26;&#xFF08;<code>\\w+</code>&#xFF09;&#x884C;&#x8FDB;&#x884C;&#x5206;&#x5272;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; <strong>Arrays.</strong><code>stream()</code> &#x5C06;&#x5176;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6D41;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5C55;&#x5E73;&#x6620;&#x5C04;&#x6210;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x3002;&#x4F7F;&#x7528; <code>matches(\\d+)</code> &#x67E5;&#x627E;&#x5E76;&#x79FB;&#x9664;&#x5168;&#x6570;&#x5B57;&#x5B57;&#x7B26;&#x4E32;&#xFF08;<strong>&#x6CE8;&#x610F;</strong>,<code>words2</code> &#x662F;&#x901A;&#x8FC7;&#x7684;&#xFF09;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <strong>String.</strong><code>trim()</code> &#x53BB;&#x9664;&#x5355;&#x8BCD;&#x4E24;&#x8FB9;&#x7684;&#x7A7A;&#x767D;&#xFF0C;<code>filter()</code> &#x8FC7;&#x6EE4;&#x6240;&#x6709;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;3&#x7684;&#x5355;&#x8BCD;&#xFF0C;&#x7D27;&#x63A5;&#x7740;&#x53EA;&#x83B7;&#x53D6;100&#x4E2A;&#x5355;&#x8BCD;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x5176;&#x4FDD;&#x5B58;&#x5230; <strong>TreeSet</strong> &#x4E2D;&#x3002;</p>
<!-- 
Files.lines() opens the Path and turns it into a Stream oflines. The next line splits those lines on boundaries of one or morenon-word characters (\\W+), which produces an array which is turnedinto a Stream with Arrays.stream(), and the result is flat-mapped back into a Stream of words. The matches(\\d+) finds
and removes Strings that are all digits (note that words2 makes itthrough). Next we apply String.trim() to shave off anysurrounding whitespace, filter() out any words less than a lengthof three, take only the first 100 words, and finally put them into aTreeSet.
 -->
<p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6D41;&#x4E2D;&#x751F;&#x6210; <strong>Map</strong>&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/MapCollector.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Pair</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Character</span> c<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> i<span class="token punctuation">;</span>
    <span class="token class-name">Pair</span><span class="token punctuation">(</span><span class="token class-name">Character</span> c<span class="token punctuation">,</span> <span class="token class-name">Integer</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> c<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Character</span> <span class="token function">getC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Pair(&quot;</span> <span class="token operator">+</span> c <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">RandomPair</span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// An infinite iterator of random capital letters:</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> capChars <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pair</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token punctuation">(</span>capChars<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapCollector</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">RandomPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>
                                <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">getI</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">getC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>{688=W, 309=C, 293=B, 761=N, 858=N, 668=G, 622=F, 751=N}
</code></pre><p><strong>Pair</strong> &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;<strong>RandomPair</strong> &#x521B;&#x5EFA;&#x4E86;&#x968F;&#x673A;&#x751F;&#x6210;&#x7684; <strong>Pair</strong> &#x5BF9;&#x8C61;&#x6D41;&#x3002;&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x7EC4;&#x5408;&#x4E24;&#x4E2A;&#x6D41;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6D41;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528; <code>mapToObj()</code> &#x5C06;&#x5176;&#x8F6C;&#x5316;&#x6210;&#x4E3A; <strong>Pair</strong> &#x6D41;&#x3002; <strong>capChars</strong> &#x968F;&#x673A;&#x751F;&#x6210;&#x7684;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x8FED;&#x4EE3;&#x5668;&#x4ECE;&#x6D41;&#x5F00;&#x59CB;&#xFF0C;&#x7136;&#x540E; <code>iterator()</code> &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5728; <code>stream()</code> &#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x3002;&#x5C31;&#x6211;&#x6240;&#x77E5;&#xFF0C;&#x8FD9;&#x662F;&#x7EC4;&#x5408;&#x591A;&#x4E2A;&#x6D41;&#x4EE5;&#x751F;&#x6210;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x6D41;&#x7684;&#x552F;&#x4E00;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x4F7F;&#x7528;&#x6700;&#x7B80;&#x5355;&#x5F62;&#x5F0F;&#x7684; <code>Collectors.toMap()</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x503C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x4ECE;&#x6D41;&#x4E2D;&#x83B7;&#x53D6;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x51FD;&#x6570;&#x3002;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x91CD;&#x8F7D;&#x5F62;&#x5F0F;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x662F;&#x5728;&#x9047;&#x5230;&#x952E;&#x503C;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>java.util.stream.Collectors</code> &#x4E2D;&#x9884;&#x8BBE;&#x7684; <strong>Collector</strong> &#x5C31;&#x80FD;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x8981;&#x6C42;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7B2C;&#x4E8C;&#x79CD;&#x5F62;&#x5F0F;&#x7684; <code>collect()</code>&#x3002; &#x6211;&#x628A;&#x5B83;&#x7559;&#x4F5C;&#x66F4;&#x9AD8;&#x7EA7;&#x7684;&#x7EC3;&#x4E60;&#xFF0C;&#x4E0B;&#x4F8B;&#x7ED9;&#x51FA;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF1A;</p>
<!-- 
The capChars randomly-generated Iterator of capitalletters starts as a stream, then the iterator() method allows us touse it in the stream() method
 -->
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/SpecialCollector.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpecialCollector</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span>
                                <span class="token class-name">ArrayList</span><span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">,</span>
                                <span class="token class-name">ArrayList</span><span class="token operator">::</span><span class="token function">addAll</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        words<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;cheese&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>cheese
cheese
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C; <strong>ArrayList</strong> &#x7684;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;&#x4F60;&#x6240;&#x9700;&#x8981;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x4F3C;&#x4E4E;&#x66F4;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684; <code>collect()</code>&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7279;&#x6B8A;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<!-- Combining All Stream Elements -->
<h3 id="&#x7EC4;&#x5408;"><a name="&#x7EC4;&#x5408;" class="anchor-navigation-ex-anchor" href="#&#x7EC4;&#x5408;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.4. &#x7EC4;&#x5408;</h3>
<ul>
<li><code>reduce(BinaryOperator)</code>&#xFF1A;&#x4F7F;&#x7528; <strong>BinaryOperator</strong> &#x6765;&#x7EC4;&#x5408;&#x6240;&#x6709;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x56E0;&#x4E3A;&#x6D41;&#x53EF;&#x80FD;&#x4E3A;&#x7A7A;&#xFF0C;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x4E3A; <strong>Optional</strong>&#x3002;</li>
<li><code>reduce(identity, BinaryOperator)</code>&#xFF1A;&#x529F;&#x80FD;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528; <strong>identity</strong> &#x4F5C;&#x4E3A;&#x5176;&#x7EC4;&#x5408;&#x7684;&#x521D;&#x59CB;&#x503C;&#x3002;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#xFF0C;<strong>identity</strong> &#x5C31;&#x662F;&#x7ED3;&#x679C;&#x3002;</li>
<li><code>reduce(identity, BiFunction, BinaryOperator)</code>&#xFF1A;&#x66F4;&#x590D;&#x6742;&#x7684;&#x4F7F;&#x7528;&#x5F62;&#x5F0F;&#xFF08;&#x6682;&#x4E0D;&#x4ECB;&#x7ECD;&#xFF09;&#xFF0C;&#x8FD9;&#x91CC;&#x628A;&#x5B83;&#x5305;&#x542B;&#x5728;&#x5185;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x663E;&#x5F0F;&#x5730;&#x7EC4;&#x5408; <code>map()</code> &#x548C; <code>reduce()</code> &#x6765;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x8868;&#x8FBE;&#x5B83;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B; <code>reduce</code> &#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Reduce.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Frobnitz</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token class-name">Frobnitz</span><span class="token punctuation">(</span><span class="token keyword">int</span> sz<span class="token punctuation">)</span> <span class="token punctuation">{</span> size <span class="token operator">=</span> sz<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Frobnitz(&quot;</span> <span class="token operator">+</span> size <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Generator:</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> BOUND <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Frobnitz</span> <span class="token function">supply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Frobnitz</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>BOUND<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Reduce</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Frobnitz</span><span class="token operator">::</span><span class="token function">supply</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fr0<span class="token punctuation">,</span> fr1<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> fr0<span class="token punctuation">.</span>size <span class="token operator">&lt;</span> <span class="token number">50</span> <span class="token operator">?</span> fr0 <span class="token operator">:</span> fr1<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>Frobnitz(58)
Frobnitz(55)
Frobnitz(93)
Frobnitz(61)
Frobnitz(61)
Frobnitz(29)
Frobnitz(68)
Frobnitz(0)
Frobnitz(22)
Frobnitz(7)
Frobnitz(29)
</code></pre><p><strong>Frobnitz</strong> &#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>supply()</code> &#x7684;&#x751F;&#x6210;&#x5668;&#xFF1B;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9;&#x4E8E; <code>Supplier<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Frobnitz</span><span class="token punctuation">&gt;</span></span></code> &#x662F;&#x7B7E;&#x540D;&#x517C;&#x5BB9;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x4F20;&#x9012;&#x7ED9; <code>Stream.generate()</code>&#xFF08;&#x8FD9;&#x79CD;&#x7B7E;&#x540D;&#x517C;&#x5BB9;&#x6027;&#x88AB;&#x79F0;&#x4F5C;&#x7ED3;&#x6784;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#x3002;&#x65E0;&#x201C;&#x521D;&#x59CB;&#x503C;&#x201D;&#x7684; <code>reduce()</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x503C;&#x662F; <strong>Optional</strong> &#x7C7B;&#x578B;&#x3002;<code>Optional.ifPresent()</code> &#x53EA;&#x6709;&#x5728;&#x7ED3;&#x679C;&#x975E;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x8C03;&#x7528; <code>Consumer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Frobnitz</span><span class="token punctuation">&gt;</span></span></code> &#xFF08;<code>println</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x88AB;&#x8C03;&#x7528;&#x662F;&#x56E0;&#x4E3A; <strong>Frobnitz</strong> &#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>toString()</code> &#x65B9;&#x6CD5;&#x8F6C;&#x6362;&#x6210; <strong>String</strong>&#xFF09;&#x3002;</p>
<p>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570; <code>fr0</code> &#x662F;&#x4E0A;&#x4E00;&#x6B21;&#x8C03;&#x7528; <code>reduce()</code> &#x7684;&#x7ED3;&#x679C;&#x3002;&#x800C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570; <code>fr1</code> &#x662F;&#x4ECE;&#x6D41;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;&#x503C;&#x3002;</p>
<p><code>reduce()</code> &#x4E2D;&#x7684; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x4F7F;&#x7528;&#x4E86;&#x4E09;&#x5143;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x83B7;&#x53D6;&#x7ED3;&#x679C;&#xFF0C;&#x5F53;&#x5176;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E; 50 &#x7684;&#x65F6;&#x5019;&#x83B7;&#x53D6; <code>fr0</code> &#x5426;&#x5219;&#x83B7;&#x53D6;&#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x503C; <code>fr1</code>&#x3002;&#x5F53;&#x53D6;&#x5F97;&#x7B2C;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E; 50 &#x7684; <code>Frobnitz</code>&#xFF0C;&#x53EA;&#x8981;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x5FFD;&#x7565;&#x5176;&#x4ED6;&#x3002;&#x8FD9;&#x662F;&#x4E2A;&#x975E;&#x5E38;&#x5947;&#x602A;&#x7684;&#x7EA6;&#x675F;&#xFF0C; &#x4E5F;&#x786E;&#x5B9E;&#x8BA9;&#x6211;&#x4EEC;&#x5BF9; <code>reduce()</code> &#x6709;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x4E86;&#x89E3;&#x3002;</p>
<!-- Matching -->
<h3 id="&#x5339;&#x914D;"><a name="&#x5339;&#x914D;" class="anchor-navigation-ex-anchor" href="#&#x5339;&#x914D;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.5. &#x5339;&#x914D;</h3>
<ul>
<li><code>allMatch(Predicate)</code> &#xFF1A;&#x5982;&#x679C;&#x6D41;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684; <strong>Predicate</strong> &#x90FD;&#x8FD4;&#x56DE; true &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x4E3A; true&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A; false &#x65F6;&#xFF0C;&#x5219;&#x505C;&#x6B62;&#x6267;&#x884C;&#x8BA1;&#x7B97;&#x3002;</li>
<li><code>anyMatch(Predicate)</code>&#xFF1A;&#x5982;&#x679C;&#x6D41;&#x4E2D;&#x7684;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684; <strong>Predicate</strong> &#x8FD4;&#x56DE; true &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x4E3A; true&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A; false &#x662F;&#x505C;&#x6B62;&#x6267;&#x884C;&#x8BA1;&#x7B97;&#x3002;</li>
<li><code>noneMatch(Predicate)</code>&#xFF1A;&#x5982;&#x679C;&#x6D41;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684; <strong>Predicate</strong> &#x90FD;&#x8FD4;&#x56DE; false &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x4E3A; true&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A; true &#x65F6;&#x505C;&#x6B62;&#x6267;&#x884C;&#x8BA1;&#x7B97;&#x3002;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728; <code>Prime.java</code> &#x4E2D;&#x770B;&#x5230;&#x4E86; <code>noneMatch()</code> &#x7684;&#x793A;&#x4F8B;&#xFF1B;<code>allMatch()</code> &#x548C; <code>anyMatch()</code> &#x7684;&#x7528;&#x6CD5;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x7B49;&#x540C;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x63A2;&#x7A76;&#x4E00;&#x4E0B;&#x77ED;&#x8DEF;&#x884C;&#x4E3A;&#x3002;&#x4E3A;&#x4E86;&#x6D88;&#x9664;&#x5197;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86; <code>show()</code>&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x7EDF;&#x4E00;&#x5730;&#x63CF;&#x8FF0;&#x8FD9;&#x4E09;&#x4E2A;&#x5339;&#x914D;&#x5668;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A; <strong>Matcher</strong> &#x63A5;&#x53E3;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Matching.java</span>
<span class="token comment">// Demonstrates short-circuiting of *Match() operations</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Matcher</span> <span class="token keyword">extends</span> <span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Stream</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Matching</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Matcher</span> match<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                match<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>
                        <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        n <span class="token operator">-&gt;</span> n <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">allMatch</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">allMatch</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">anyMatch</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">anyMatch</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">noneMatch</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">noneMatch</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>1 2 3 4 5 6 7 8 9 true
1 2 3 4 false
1 true
1 2 3 4 5 6 7 8 9 false
1 false
1 2 3 4 5 6 7 8 9 true
</code></pre><p><strong>BiPredicate</strong> &#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x5143;&#x8C13;&#x8BCD;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x4E14;&#x53EA;&#x8FD4;&#x56DE; true &#x6216;&#x8005; false&#x3002;&#x5B83;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x6D4B;&#x8BD5;&#x7684;&#x6D41;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x8C13;&#x8BCD; <strong>Predicate</strong>&#x3002;<strong>Matcher</strong> &#x9002;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684; <strong>Stream::*Match</strong> &#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x6BCF;&#x4E00;&#x4E2A;&#x5230; <code>show()</code> &#x4E2D;&#x3002;<code>match.test()</code> &#x7684;&#x8C03;&#x7528;&#x4F1A;&#x88AB;&#x8F6C;&#x6362;&#x6210; <strong>Stream::*Match</strong> &#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x3002;</p>
<p><code>show()</code> &#x83B7;&#x53D6;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;<strong>Matcher</strong> &#x5339;&#x914D;&#x5668;&#x548C;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x8C13;&#x8BCD;&#x6D4B;&#x8BD5; <strong>n &lt; val</strong> &#x4E2D;&#x6700;&#x5927;&#x503C;&#x7684; <strong>val</strong>&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x751F;&#x6210;&#x4E00;&#x4E2A;1-9&#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;&#x6D41;&#x3002;<code>peek()</code> &#x662F;&#x7528;&#x4E8E;&#x5411;&#x6211;&#x4EEC;&#x5C55;&#x793A;&#x6D4B;&#x8BD5;&#x5728;&#x77ED;&#x8DEF;&#x4E4B;&#x524D;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4ECE;&#x8F93;&#x51FA;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6BCF;&#x6B21;&#x90FD;&#x53D1;&#x751F;&#x4E86;&#x77ED;&#x8DEF;&#x3002;</p>
<h3 id="&#x67E5;&#x627E;"><a name="&#x67E5;&#x627E;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x627E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.6. &#x67E5;&#x627E;</h3>
<ul>
<li><code>findFirst()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x6D41;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong>&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x8FD4;&#x56DE; <strong>Optional.empty</strong>&#x3002;</li>
<li><code>findAny(</code>&#xFF1A;&#x8FD4;&#x56DE;&#x542B;&#x6709;&#x4EFB;&#x610F;&#x6D41;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong>&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x8FD4;&#x56DE; <strong>Optional.empty</strong>&#x3002;</li>
</ul>
<p>&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/SelectElement.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>258
258
258
242
</code></pre><p><code>findFirst()</code> &#x65E0;&#x8BBA;&#x6D41;&#x662F;&#x5426;&#x4E3A;&#x5E76;&#x884C;&#x5316;&#x7684;&#xFF0C;&#x603B;&#x662F;&#x4F1A;&#x9009;&#x62E9;&#x6D41;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x5BF9;&#x4E8E;&#x975E;&#x5E76;&#x884C;&#x6D41;&#xFF0C;<code>findAny()</code>&#x4F1A;&#x9009;&#x62E9;&#x6D41;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF08;&#x5373;&#x4F7F;&#x4ECE;&#x5B9A;&#x4E49;&#x4E0A;&#x6765;&#x770B;&#x662F;&#x9009;&#x62E9;&#x4EFB;&#x610F;&#x5143;&#x7D20;&#xFF09;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>parallel()</code> &#x6765;&#x5E76;&#x884C;&#x6D41;&#x4ECE;&#x800C;&#x5F15;&#x5165; <code>findAny()</code> &#x9009;&#x62E9;&#x975E;&#x7B2C;&#x4E00;&#x4E2A;&#x6D41;&#x5143;&#x7D20;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5FC5;&#x987B;&#x9009;&#x62E9;&#x6D41;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x90A3;&#x5C31;&#x4F7F;&#x7528; <code>reduce()</code>&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/LastElement.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LastElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OptionalInt</span> last <span class="token operator">=</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>last<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Non-numeric object:</span>
        <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lastobj <span class="token operator">=</span>
                <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                lastobj<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing there!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>19
three
</code></pre><p><code>reduce()</code>  &#x7684;&#x53C2;&#x6570;&#x53EA;&#x662F;&#x7528;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x66FF;&#x6362;&#x4E86;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x6700;&#x7EC8;&#x53EA;&#x751F;&#x6210;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x5982;&#x679C;&#x4E3A;&#x6570;&#x5B57;&#x6D41;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x76F8;&#x8FD1;&#x7684;&#x6570;&#x5B57; <strong>Optional</strong> &#x7C7B;&#x578B;&#xFF08; numeric optional type&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <strong>Optional</strong> &#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x50CF;&#x4E0A;&#x4F8B;&#x4E2D;&#x7684; <code>Optional<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String</span><span class="token punctuation">&gt;</span></span></code>&#x3002;</p>
<!-- Informational -->
<h3 id="&#x4FE1;&#x606F;"><a name="&#x4FE1;&#x606F;" class="anchor-navigation-ex-anchor" href="#&#x4FE1;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.7. &#x4FE1;&#x606F;</h3>
<ul>
<li><code>count()</code>&#xFF1A;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;</li>
<li><code>max(Comparator)</code>&#xFF1A;&#x6839;&#x636E;&#x6240;&#x4F20;&#x5165;&#x7684; <strong>Comparator</strong> &#x6240;&#x51B3;&#x5B9A;&#x7684;&#x201C;&#x6700;&#x5927;&#x201D;&#x5143;&#x7D20;&#x3002;</li>
<li><code>min(Comparator)</code>&#xFF1A;&#x6839;&#x636E;&#x6240;&#x4F20;&#x5165;&#x7684; <strong>Comparator</strong> &#x6240;&#x51B3;&#x5B9A;&#x7684;&#x201C;&#x6700;&#x5C0F;&#x201D;&#x5143;&#x7D20;&#x3002;</li>
</ul>
<p><strong>String</strong> &#x7C7B;&#x578B;&#x6709;&#x9884;&#x8BBE;&#x7684; <strong>Comparator</strong> &#x5B9E;&#x73B0;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/Informational.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Informational</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;NONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;NONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>32
a
you
</code></pre><p><code>min()</code> &#x548C; <code>max()</code> &#x7684;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E3A; <strong>Optional</strong>&#xFF0C;&#x8FD9;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>orElse()</code>&#x6765;&#x89E3;&#x5305;&#x3002;</p>
<!-- Information for Numeric Streams -->
<h3 id="&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;"><a name="&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;" class="anchor-navigation-ex-anchor" href="#&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.8. &#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;</h3>
<ul>
<li><code>average()</code> &#xFF1A;&#x6C42;&#x53D6;&#x6D41;&#x5143;&#x7D20;&#x5E73;&#x5747;&#x503C;&#x3002;</li>
<li><code>max()</code> &#x548C; <code>min()</code>&#xFF1A;&#x6570;&#x503C;&#x6D41;&#x64CD;&#x4F5C;&#x65E0;&#x9700; <strong>Comparator</strong>&#x3002;</li>
<li><code>sum()</code>&#xFF1A;&#x5BF9;&#x6240;&#x6709;&#x6D41;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6C42;&#x548C;&#x3002;</li>
<li><code>summaryStatistics()</code>&#xFF1A;&#x751F;&#x6210;&#x53EF;&#x80FD;&#x6709;&#x7528;&#x7684;&#x6570;&#x636E;&#x3002;&#x76EE;&#x524D;&#x5E76;&#x4E0D;&#x592A;&#x6E05;&#x695A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5B58;&#x5728;&#x7684;&#x5FC5;&#x8981;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x7528;&#x66F4;&#x76F4;&#x63A5;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x3002;</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token comment">// streams/NumericStreamInfo.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumericStreamInfo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summaryStatistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre class="language-"><code>507.94
998
8
50794
IntSummaryStatistics{count=100, sum=50794, min=8, average=507.940000, max=998}
</code></pre><p>&#x4E0A;&#x4F8B;&#x64CD;&#x4F5C;&#x5BF9;&#x4E8E; <strong>LongStream</strong> &#x548C; <strong>DoubleStream</strong> &#x540C;&#x6837;&#x9002;&#x7528;&#x3002;</p>
<h2 id="&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;"><a name="&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;" class="anchor-navigation-ex-anchor" href="#&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. &#x672C;&#x7AE0;&#x5C0F;&#x7ED3;</h2>
<p>&#x6D41;&#x5F0F;&#x64CD;&#x4F5C;&#x6539;&#x53D8;&#x5E76;&#x6781;&#x5927;&#x5730;&#x63D0;&#x5347;&#x4E86; Java &#x8BED;&#x8A00;&#x7684;&#x53EF;&#x7F16;&#x7A0B;&#x6027;&#xFF0C;&#x5E76;&#x53EF;&#x80FD;&#x6781;&#x5927;&#x5730;&#x963B;&#x6B62;&#x4E86; Java &#x7F16;&#x7A0B;&#x4EBA;&#x5458;&#x5411;&#x8BF8;&#x5982; Scala &#x8FD9;&#x79CD;&#x51FD;&#x6570;&#x5F0F;&#x8BED;&#x8A00;&#x7684;&#x6D41;&#x8F6C;&#x3002;&#x5728;&#x672C;&#x4E66;&#x7684;&#x5269;&#x4F59;&#x90E8;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x4F7F;&#x7528;&#x6D41;&#x3002;</p>
<!-- 分页 -->
<div style="page-break-after: always;"></div>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="13-Functional-Programming.html#本章小结" class="navigation navigation-prev " aria-label="Previous page: 本章小结">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="14-Streams.html#流支持" class="navigation navigation-next " aria-label="Next page: 流支持">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"第十四章 流式编程","level":"1.17","depth":1,"next":{"title":"流支持","level":"1.17.1","depth":2,"anchor":"#流支持","path":"chapters/14-Streams.md","ref":"./chapters/14-Streams.md#流支持","articles":[]},"previous":{"title":"本章小结","level":"1.16.10","depth":2,"anchor":"#本章小结","path":"chapters/13-Functional-Programming.md","ref":"./chapters/13-Functional-Programming.md#本章小结","articles":[]},"dir":"ltr"},"config":{"plugins":["splitter","anchor-navigation-ex","-sharing","sharing-plus","-highlight","prism"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"]},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"night","family":"serif","size":2},"anchor-navigation-ex":{"associatedWithSummary":false,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"sharing":{"weibo":true,"qzone":true,"qq":true,"douban":true},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true}},"theme":"default","author":"Little Captain","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"OnJava8","gitbook":"*","description":"OnJava8"},"file":{"path":"chapters/14-Streams.md","mtime":"2021-08-24T17:00:35.909Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-24T17:01:25.080Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

